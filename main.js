!function(){"use strict";class e{constructor(e,t,s){let{data:i,handleCardClick:r,handleLikeIcon:n,handleDeleteIcon:o}=e;var a,l;l=()=>(this._listItem=this._getTemplate(),this._title=this._listItem.querySelector(".element__title-name"),this._image=this._listItem.querySelector(".element__item"),this._title.textContent=this._name,this._image.src=this._link,this._image.alt="Landscape image from a place named ".concat(this._name),this._addEventListeners(),this._ownerId!==this._userId&&(this._deleteButton.style.display="none"),this._listItem.querySelector(".element__likes-count").textContent=this._likes.length,this.isLiked()&&this.likeCard(this._likes),this._listItem),(a="generateCard")in this?Object.defineProperty(this,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):this[a]=l,this._name=i.name,this._link=i.link,this._likes=i.likes,this._templateCardSelector=t,this._handleCardClick=r,this._handleDeleteIcon=o,this._handleLikeIcon=n,this._id=i._id,this._userId=s,this._ownerId=i.owner._id}_getTemplate(){return document.querySelector(this._templateCardSelector).content.querySelector(".element").cloneNode(!0)}isLiked(){return this._likes.some((e=>e._id===this._userId))}removeCard(){this._listItem.remove(),this._listItem=null}likeCard(e){this._likes=e,this._listItem.querySelector(".element__likes-count").textContent=this._likes.length,this._listItem.querySelector(".element__title-button").classList.toggle("element__title-button_active")}_addEventListeners(){this._likeButton=this._listItem.querySelector(".element__title-button"),this._deleteButton=this._listItem.querySelector(".element__delete-button"),this._likeButton.addEventListener("click",(()=>{this._handleLikeIcon(this._id)})),this._deleteButton.addEventListener("click",(()=>{this._handleDeleteIcon(this._id)})),this._image.addEventListener("click",(()=>{this._handleCardClick(this._name,this._link)}))}}function t(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var s=class{constructor(e,s){t(this,"_isFormValid",(()=>this._inputs.every((e=>!0===e.validity.valid)))),t(this,"_toggleButtonState",(()=>{const{inactiveButtonClass:e}=this._settings;this._isFormValid()?this._enableSubmitButton(this._button,e):this._disableSubmitButton(this._button,e)})),t(this,"_setEventListeners",(()=>{const{inputSelector:e,submitButtonSelector:t}=this._settings;this._inputs=[...this._form.querySelectorAll(e)],this._button=this._form.querySelector(t),this._inputs.forEach((e=>{e.addEventListener("input",(()=>{this._checkValidity(e,this._settings),this._toggleButtonState()}))}))})),this._settings=e,this._form=s}_showError(e){const{inputErrorClass:t,errorClass:s}=this._settings,i=e.validationMessage,r=this._form.querySelector("#".concat(e.id,"-error"));r.textContent=i,r.classList.add(s),e.classList.add(t)}_hideError(e){const{inputErrorClass:t,errorClass:s}=this._settings,i=this._form.querySelector("#".concat(e.id,"-error"));i.textContent="",i.classList.remove(s),e.classList.remove(t)}_checkValidity(e){e.validity.valid?this._hideError(e):this._showError(e)}_disableSubmitButton(e){const{inactiveButtonClass:t}=this._settings;e.disabled=!0,e.classList.add(t)}_enableSubmitButton(e){const{inactiveButtonClass:t}=this._settings;e.disabled=!1,e.classList.remove(t)}resetValidation(){this._inputs.forEach((e=>{this._hideError(e)})),this._toggleButtonState()}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}};function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class r{constructor(e){i(this,"_handleEscClose",(e=>{"Escape"===e.key&&this.close()})),i(this,"_handleOverlayClose",(e=>{(e.target.classList.contains("popup")||e.target.classList.contains("popup__close-button"))&&this.close()})),this._popup=document.querySelector(e),this.close.bind(this)}open(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose),document.addEventListener("mousedown",this._handleOverlayClose)}close(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose),document.removeEventListener("mousedown",this._handleOverlayClose)}setEventListeners(){this._popup.querySelector(".popup__close-icon").addEventListener("click",(()=>{this.close()}))}}class n extends r{constructor(e,t){super(e),this._submitHandler=t,this._form=this._popup.querySelector(".popup__form"),this._inputs=[...this._form.querySelectorAll(".form__input")]}_getInputValues(){const e={};return this._inputs.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._submitHandler(this._getInputValues()),this.close()}))}close(){super.close(),this._form.reset()}}class o{constructor(e,t){let{items:s,renderer:i}=e;this._items=s,this._renderer=i,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._element=this._renderer(e)}))}addItem(e){this._container.prepend(e)}}const a=(e,t)=>fetch(e,t).then((e=>e.ok?e.json():Promise.reject(e.statusText))).catch(console.log);function l(e,t){e.textContent=t}const c=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}getInitialCards(){return a("".concat(this._baseUrl,"/cards"),{headers:this._headers})}getUserInfo(){return a("".concat(this._baseUrl,"/users/me"),{headers:this._headers})}setUserInfo(e,t){return a("".concat(this._baseUrl,"/users/me"),{headers:this._headers,method:"PATCH",body:JSON.stringify({name:e,about:t})})}createCard(e){return a("".concat(this._baseUrl,"/cards"),{headers:this._headers,method:"POST",body:JSON.stringify(e)})}deleteCard(e){return a("".concat(this._baseUrl,"/cards/").concat(e),{headers:this._headers,method:"DELETE"})}likeCard(e){return a("".concat(this._baseUrl,"/cards/likes/").concat(e),{headers:this._headers,method:"PUT"})}dislikeCard(e){return a("".concat(this._baseUrl,"/cards/likes/").concat(e),{headers:this._headers,method:"DELETE"})}setUserAvatar(e){return a("".concat(this._baseUrl,"/users/me/avatar"),{headers:this._headers,method:"PATCH",body:JSON.stringify({avatar:e})})}}({baseUrl:"https://around.nomoreparties.co/v1/group-1",headers:{authorization:"a0dd5829-1b51-4f9b-93c7-6d4f8e85cb31","Content-Type":"application/json"}}),_=document.querySelector(".popup_type_edit"),d=document.querySelector(".popup_type_add-card"),u=document.querySelector(".popup_type_avatar"),h=(document.querySelector(".elements__list"),_.querySelector(".popup__form")),p=d.querySelector(".popup__form"),m=u.querySelector(".popup__form"),b=document.querySelector(".form__input_type_name"),f=document.querySelector(".form__input_type_job"),v=document.querySelector(".profile__open-button"),y=document.querySelector(".profile__add-button"),S=document.querySelector(".profile__avatar-overlay"),C=document.querySelector(".profile__image"),g=document.querySelector(".profile__avatar-image"),k={inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_disabled",inputErrorClass:"form__input_type_error",errorClass:"popup__error_visible"},E=h.querySelector(k.submitButtonSelector),L=p.querySelector(k.submitButtonSelector),I=m.querySelector(k.submitButtonSelector);let q,U;const w=new class{constructor(e){let{profileNameSelector:t,profileJobSelector:s}=e;this._profileName=document.querySelector(t),this._profileJob=document.querySelector(s)}getUserInfo(){return{name:this._profileName.textContent,job:this._profileJob.textContent}}setUserInfo(e){let{profileNameInput:t,profileJobInput:s}=e;this._profileName.textContent=t,this._profileJob.textContent=s}setUserAvatar(e,t){this._avatar=e,this._avatar.src=t}}({profileNameSelector:".profile__title-name",profileJobSelector:".profile__subtitle-job",profileAvatarSelector:".profile__image"});Promise.all([c.getInitialCards(),c.getUserInfo()]).then((e=>{let[t,s]=e;U=new o({items:t,renderer:e=>U.addItem(V(e))},".elements__list"),q=s._id,U.renderItems(),w.setUserInfo({profileNameInput:s.name,profileJobInput:s.about}),g.prepend(C),w.setUserAvatar(C,s.avatar)}));const B=new class extends r{constructor(e){var t,s;super(e),s=e=>{super.open(),this._name=e.name,this._link=e.link,this._imageCardCaptionModal.textContent=this._name,this._imageCardModal.src=this._link,this._imageCardModal.alt="Landscape image from a place named ".concat(this._name)},(t="open")in this?Object.defineProperty(this,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):this.open=s,this._imageCardModal=this._popup.querySelector(".popup__image"),this._imageCardCaptionModal=this._popup.querySelector(".popup__caption")}}(".popup_type_image");B.setEventListeners();const x=new class extends r{setAction(e){this._submitHandler=e}setEventListeners(){this._popup.addEventListener("submit",(e=>{e.preventDefault(),this._submitHandler(),this.close()})),super.setEventListeners()}}(".popup_type_delete-card");function V(t){const s=new e({data:t,handleCardClick:()=>{B.open(t)},handleLikeIcon:e=>{s.isLiked()?c.dislikeCard(e).then((e=>{s.likeCard(e.likes)})):c.likeCard(e).then((e=>{s.likeCard(e.likes)}))},handleDeleteIcon:e=>{x.open(),x.setAction((()=>{c.deleteCard(e).then((e=>{s.removeCard(),x.close()}))}))}},".element__template",q);return s.generateCard()}x.setEventListeners();const j=new n(".popup_type_edit",(function(e){l(E,"Saving..."),c.setUserInfo(e.name,e.job).then((e=>{l(E,"Save"),w.setUserInfo({profileNameInput:e.name,profileJobInput:e.about}),j.close()}))}));j.setEventListeners();const A=new n(".popup_type_add-card",(function(e){l(L,"Creating..."),c.createCard(e).then((e=>{V(e),l(L,"Create"),U.addItem(V(e)),A.close()}))}));A.setEventListeners();const N=new n(".popup_type_avatar",(function(e){l(I,"Saving..."),c.setUserAvatar(e).then((e=>{w.setUserInfo(C,e.avatar),l(I,"Save"),setUserAvatar(e),N.close()}))}));N.setEventListeners();const J=new s(k,h),O=new s(k,p),P=new s(k,m);J.enableValidation(),O.enableValidation(),P.enableValidation(),v.addEventListener("click",(()=>{!function(){const{name:e,job:t}=w.getUserInfo();b.value=e,f.value=t}(),J.resetValidation(),j.open()})),y.addEventListener("click",(()=>{O.resetValidation(),A.open()})),S.addEventListener("click",(()=>{P.resetValidation(),N.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cUUsRUFBZXpHLGNBUm5CeUcsRUFBZWhHLG9CQWFmLE1BQU1pRyxFQUFvQixJQUFJQyxFQUFjbEosRUFBVTRHLEdBQ2hEdUMsRUFBdUIsSUFBSUQsRUFBY2xKLEVBQVU2RyxHQUNuRHVDLEVBQXlCLElBQUlGLEVBQWNsSixFQUFVOEcsR0FFM0RtQyxFQUFrQmpILG1CQUNsQm1ILEVBQXFCbkgsbUJBQ3JCb0gsRUFBdUJwSCxtQkFhdkJpRixFQUFrQmxILGlCQUFpQixTQUFTLE1BWDVDLFdBQ0UsTUFBTSxLQUFFcEIsRUFBRixJQUFRb0osR0FBUUwsRUFBUy9CLGNBQy9Cb0IsRUFBaUJ2RCxNQUFRN0UsRUFDekJxSSxFQUFnQnhELE1BQVF1RSxFQVN4QnNCLEdBQ0FKLEVBQWtCbEgsa0JBQ2xCK0csRUFBVWxHLFVBR1pzRSxFQUFjbkgsaUJBQWlCLFNBQVMsS0FDdENvSixFQUFxQnBILGtCQUNyQmdILEVBQWFuRyxVQUdmdUUsRUFBZ0JwSCxpQkFBaUIsU0FBUyxLQUV4Q3FKLEVBQXVCckgsa0JBQ3ZCaUgsRUFBZXBHLFUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW1fd2ViX3Byb2plY3RfOC8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtX3dlYl9wcm9qZWN0XzgvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bV93ZWJfcHJvamVjdF84Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtX3dlYl9wcm9qZWN0XzgvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bV93ZWJfcHJvamVjdF84Ly4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW1fd2ViX3Byb2plY3RfOC8uL3NyYy91dGlscy91dGlscy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW1fd2ViX3Byb2plY3RfOC8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW1fd2ViX3Byb2plY3RfOC8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtX3dlYl9wcm9qZWN0XzgvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtX3dlYl9wcm9qZWN0XzgvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW1fd2ViX3Byb2plY3RfOC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bV93ZWJfcHJvamVjdF84Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoU3VibWl0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHsgZGF0YSwgaGFuZGxlQ2FyZENsaWNrLCBoYW5kbGVMaWtlSWNvbiwgaGFuZGxlRGVsZXRlSWNvbiB9LFxyXG4gICAgdGVtcGxhdGVDYXJkU2VsZWN0b3IsXHJcbiAgICB1c2VySWRcclxuICApIHtcclxuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5fbGlrZXMgPSBkYXRhLmxpa2VzO1xyXG4gICAgdGhpcy5fdGVtcGxhdGVDYXJkU2VsZWN0b3IgPSB0ZW1wbGF0ZUNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUljb24gPSBoYW5kbGVEZWxldGVJY29uO1xyXG4gICAgdGhpcy5faGFuZGxlTGlrZUljb24gPSBoYW5kbGVMaWtlSWNvbjtcclxuICAgIHRoaXMuX2lkID0gZGF0YS5faWQ7XHJcbiAgICB0aGlzLl91c2VySWQgPSB1c2VySWQ7XHJcbiAgICB0aGlzLl9vd25lcklkID0gZGF0YS5vd25lci5faWQ7XHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCB0ZW1wbGF0ZUxpc3RJdGVtID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fdGVtcGxhdGVDYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudFwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG5cclxuICAgIHJldHVybiB0ZW1wbGF0ZUxpc3RJdGVtO1xyXG4gIH1cclxuXHJcbiAgaXNMaWtlZCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9saWtlcy5zb21lKChwcmVzb24pID0+IHByZXNvbi5faWQgPT09IHRoaXMuX3VzZXJJZCk7XHJcbiAgfVxyXG5cclxuICByZW1vdmVDYXJkKCkge1xyXG4gICAgdGhpcy5fbGlzdEl0ZW0ucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9saXN0SXRlbSA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBsaWtlQ2FyZChuZXdMaWtlcykge1xyXG4gICAgdGhpcy5fbGlrZXMgPSBuZXdMaWtlcztcclxuICAgIHRoaXMuX2xpc3RJdGVtLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fbGlrZXMtY291bnRcIikudGV4dENvbnRlbnQgPVxyXG4gICAgICB0aGlzLl9saWtlcy5sZW5ndGg7XHJcblxyXG4gICAgdGhpcy5fbGlzdEl0ZW1cclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fdGl0bGUtYnV0dG9uXCIpXHJcbiAgICAgIC5jbGFzc0xpc3QudG9nZ2xlKFwiZWxlbWVudF9fdGl0bGUtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICB9XHJcblxyXG4gIF9hZGRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9saXN0SXRlbS5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX3RpdGxlLWJ1dHRvblwiKTtcclxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX2xpc3RJdGVtLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLmVsZW1lbnRfX2RlbGV0ZS1idXR0b25cIlxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VJY29uKHRoaXMuX2lkKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUljb24odGhpcy5faWQpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9pbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5fbmFtZSwgdGhpcy5fbGluayk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGdlbmVyYXRlQ2FyZCA9ICgpID0+IHtcclxuICAgIHRoaXMuX2xpc3RJdGVtID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIHRoaXMuX3RpdGxlID0gdGhpcy5fbGlzdEl0ZW0ucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X190aXRsZS1uYW1lXCIpO1xyXG4gICAgdGhpcy5faW1hZ2UgPSB0aGlzLl9saXN0SXRlbS5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2l0ZW1cIik7XHJcbiAgICB0aGlzLl90aXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9pbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gYExhbmRzY2FwZSBpbWFnZSBmcm9tIGEgcGxhY2UgbmFtZWQgJHt0aGlzLl9uYW1lfWA7XHJcblxyXG4gICAgdGhpcy5fYWRkRXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICBpZiAodGhpcy5fb3duZXJJZCAhPT0gdGhpcy5fdXNlcklkKSB7XHJcbiAgICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5fbGlzdEl0ZW0ucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19saWtlcy1jb3VudFwiKS50ZXh0Q29udGVudCA9XHJcbiAgICAgIHRoaXMuX2xpa2VzLmxlbmd0aDtcclxuXHJcbiAgICBpZiAodGhpcy5pc0xpa2VkKCkpIHtcclxuICAgICAgdGhpcy5saWtlQ2FyZCh0aGlzLl9saWtlcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2xpc3RJdGVtO1xyXG4gIH07XHJcbn1cclxuIiwiY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm0pIHtcclxuICAgIHRoaXMuX3NldHRpbmdzID0gc2V0dGluZ3M7XHJcbiAgICB0aGlzLl9mb3JtID0gZm9ybTtcclxuICB9XHJcblxyXG4gIF9zaG93RXJyb3IoaW5wdXQpIHtcclxuICAgIGNvbnN0IHsgaW5wdXRFcnJvckNsYXNzLCBlcnJvckNsYXNzIH0gPSB0aGlzLl9zZXR0aW5ncztcclxuICAgIGNvbnN0IGVycm9yID0gaW5wdXQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0LmlkfS1lcnJvcmApO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3I7XHJcblxyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQoZXJyb3JDbGFzcyk7XHJcbiAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKGlucHV0RXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUVycm9yKGlucHV0KSB7XHJcbiAgICBjb25zdCB7IGlucHV0RXJyb3JDbGFzcywgZXJyb3JDbGFzcyB9ID0gdGhpcy5fc2V0dGluZ3M7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0LmlkfS1lcnJvcmApO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuXHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShlcnJvckNsYXNzKTtcclxuICAgIGlucHV0LmNsYXNzTGlzdC5yZW1vdmUoaW5wdXRFcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9jaGVja1ZhbGlkaXR5KGlucHV0KSB7XHJcbiAgICBpZiAoaW5wdXQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5faGlkZUVycm9yKGlucHV0KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3Nob3dFcnJvcihpbnB1dCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfZGlzYWJsZVN1Ym1pdEJ1dHRvbihidXR0b24pIHtcclxuICAgIGNvbnN0IHsgaW5hY3RpdmVCdXR0b25DbGFzcyB9ID0gdGhpcy5fc2V0dGluZ3M7XHJcbiAgICBidXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgfVxyXG4gIF9lbmFibGVTdWJtaXRCdXR0b24oYnV0dG9uKSB7XHJcbiAgICBjb25zdCB7IGluYWN0aXZlQnV0dG9uQ2xhc3MgfSA9IHRoaXMuX3NldHRpbmdzO1xyXG4gICAgYnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZShpbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9pc0Zvcm1WYWxpZCA9ICgpID0+XHJcbiAgICB0aGlzLl9pbnB1dHMuZXZlcnkoKGlucHV0KSA9PiBpbnB1dC52YWxpZGl0eS52YWxpZCA9PT0gdHJ1ZSk7XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSA9ICgpID0+IHtcclxuICAgIGNvbnN0IHsgaW5hY3RpdmVCdXR0b25DbGFzcyB9ID0gdGhpcy5fc2V0dGluZ3M7XHJcblxyXG4gICAgaWYgKHRoaXMuX2lzRm9ybVZhbGlkKCkpIHtcclxuICAgICAgdGhpcy5fZW5hYmxlU3VibWl0QnV0dG9uKHRoaXMuX2J1dHRvbiwgaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9kaXNhYmxlU3VibWl0QnV0dG9uKHRoaXMuX2J1dHRvbiwgaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xyXG4gICAgY29uc3QgeyBpbnB1dFNlbGVjdG9yLCBzdWJtaXRCdXR0b25TZWxlY3RvciB9ID0gdGhpcy5fc2V0dGluZ3M7XHJcbiAgICB0aGlzLl9pbnB1dHMgPSBbLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKGlucHV0U2VsZWN0b3IpXTtcclxuICAgIHRoaXMuX2J1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihzdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcblxyXG4gICAgdGhpcy5faW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tWYWxpZGl0eShpbnB1dCwgdGhpcy5fc2V0dGluZ3MpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5faW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVFcnJvcihpbnB1dCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5jbG9zZS5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIF9oYW5kbGVPdmVybGF5Q2xvc2UgPSAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoXHJcbiAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBcIikgfHxcclxuICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cF9fY2xvc2UtYnV0dG9uXCIpXHJcbiAgICApIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9oYW5kbGVPdmVybGF5Q2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9oYW5kbGVPdmVybGF5Q2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlLWljb25cIik7XHJcbiAgICBjbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cCwgc3VibWl0SGFuZGxlcikge1xyXG4gICAgc3VwZXIocG9wdXApO1xyXG4gICAgdGhpcy5fc3VibWl0SGFuZGxlciA9IHN1Ym1pdEhhbmRsZXI7XHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX2lucHV0cyA9IFsuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9ybV9faW5wdXRcIildO1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXRWYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGlucHV0VmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEhhbmRsZXIodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG5cclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9yZW5kZXJlcihlbGVtZW50KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn1cclxuXHJcbiIsImV4cG9ydCBjb25zdCBjdXN0b21GZXRjaCA9ICh1cmwsIGhlYWRlcnMpID0+XHJcbiAgZmV0Y2godXJsLCBoZWFkZXJzKVxyXG4gICAgLnRoZW4oKHJlcykgPT4gKHJlcy5vayA/IHJlcy5qc29uKCkgOiBQcm9taXNlLnJlamVjdChyZXMuc3RhdHVzVGV4dCkpKVxyXG4gICAgLmNhdGNoKGNvbnNvbGUubG9nKTtcclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaW1wcm92ZVVYKGVsZW1lbnQsIHRleHQpIHtcclxuICBlbGVtZW50LnRleHRDb250ZW50ID0gdGV4dDtcclxufVxyXG4iLCJpbXBvcnQgeyBjdXN0b21GZXRjaCB9IGZyb20gXCIuLi91dGlscy91dGlscy5qc1wiO1xyXG5cclxuY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGhlYWRlcnMgfSkge1xyXG4gICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XHJcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcclxuICB9XHJcblxyXG4gIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIHJldHVybiBjdXN0b21GZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4gY3VzdG9tRmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKG5hbWUsIGFib3V0KSB7XHJcbiAgICByZXR1cm4gY3VzdG9tRmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICBhYm91dDogYWJvdXQsXHJcbiAgICAgIH0pLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjcmVhdGVDYXJkKGRhdGEpIHtcclxuICAgIHJldHVybiBjdXN0b21GZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gY3VzdG9tRmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGxpa2VDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGN1c3RvbUZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBkaXNsaWtlQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiBjdXN0b21GZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckF2YXRhcih1cmwpIHtcclxuICAgIHJldHVybiBjdXN0b21GZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGF2YXRhcjogdXJsIH0pLFxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwLTFcIixcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcImEwZGQ1ODI5LTFiNTEtNGY5Yi05M2M3LTZkNGY4ZTg1Y2IzMVwiLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgfSxcclxufSk7XHJcbiIsIi8vbW9kYWxzXHJcbmNvbnN0IGVkaXRQcm9maWxlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3R5cGVfZWRpdFwiKTtcclxuY29uc3QgYWRkTmV3Q2FyZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX2FkZC1jYXJkXCIpO1xyXG5jb25zdCBhZGROZXdBdmF0YXJNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdHlwZV9hdmF0YXJcIilcclxuXHJcbmV4cG9ydCBjb25zdCB0ZW1wbGF0ZUNhcmRTZWxlY3RvciA9IFwiLmVsZW1lbnRfX3RlbXBsYXRlXCI7XHJcbmV4cG9ydCBjb25zdCBsaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fbGlzdFwiKTtcclxuXHJcbi8vZm9ybXNcclxuZXhwb3J0IGNvbnN0IGVkaXRQcm9maWxlRm9ybSA9IGVkaXRQcm9maWxlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcclxuZXhwb3J0IGNvbnN0IGFkZENhcmRGb3JtID0gYWRkTmV3Q2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XHJcbmV4cG9ydCBjb25zdCBhZGRBdmF0YXJGb3JtID0gYWRkTmV3QXZhdGFyTW9kYWwucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcclxuXHJcbi8vZXhwb3J0IGNvbnN0IGFkZEF2YXRhckZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtX3R5cGVfYXZhdGFyXCIpO1xyXG5cclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVOYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLmZvcm1fX2lucHV0X3R5cGVfbmFtZVwiXHJcbik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlSm9iSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2lucHV0X3R5cGVfam9iXCIpO1xyXG4vL2V4cG9ydCBjb25zdCBwcm9maWxlQXZhdGFySW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2lucHV0X3R5cGVfYXZhdGFyLWxpbmtcIilcclxuXHJcbi8vb3BlbiBtb2RhbCBidXR0b25zXHJcbmV4cG9ydCBjb25zdCBlZGl0UHJvZmlsZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIucHJvZmlsZV9fb3Blbi1idXR0b25cIlxyXG4pO1xyXG5leHBvcnQgY29uc3QgYWRkQ2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IGFkZEF2YXRhckJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyLW92ZXJsYXlcIilcclxuXHJcbmV4cG9ydCBjb25zdCBwcm9maWxlSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2ltYWdlXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUltYWdlQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5wcm9maWxlX19hdmF0YXItaW1hZ2VcIlxyXG4pO1xyXG5cclxuLy9zZXR0aW5nc1xyXG5leHBvcnQgY29uc3Qgc2V0dGluZ3MgPSB7XHJcbiAgaW5wdXRTZWxlY3RvcjogXCIuZm9ybV9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIuZm9ybV9fYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJmb3JtX19idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwicG9wdXBfX2Vycm9yX3Zpc2libGVcIixcclxufTtcclxuXHJcbi8vc3VibWl0IGJ1dHRvbnNcclxuZXhwb3J0IGNvbnN0IGVkaXRQcm9maWxlU3VibWl0QnV0dG9uID0gZWRpdFByb2ZpbGVGb3JtLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3IpXHJcbmV4cG9ydCBjb25zdCBhZGRDYXJkU3VibWl0QnV0dG9uID0gYWRkQ2FyZEZvcm0ucXVlcnlTZWxlY3RvcihcclxuICBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcilcclxuZXhwb3J0IGNvbnN0IGF2YXRhclN1Ym1pdEJ1dHRvbiA9IGFkZEF2YXRhckZvcm0ucXVlcnlTZWxlY3RvcihcclxuICBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcilcclxuXHJcblxyXG5cclxuXHJcbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcbmltcG9ydCB7IENhcmQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IHsgUG9wdXBXaXRoRm9ybSB9IGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhTdWJtaXQgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoU3VibWl0LmpzXCI7XHJcbmltcG9ydCB7IFNlY3Rpb24gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCB7IFVzZXJJbmZvIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IHsgYXBpIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XHJcbmltcG9ydCB7IGltcHJvdmVVWCB9IGZyb20gXCIuLi91dGlscy91dGlscy5qc1wiO1xyXG5pbXBvcnQge1xyXG4gIHRlbXBsYXRlQ2FyZFNlbGVjdG9yLFxyXG4gIGxpc3QsXHJcbiAgZWRpdFByb2ZpbGVGb3JtLFxyXG4gIGFkZENhcmRGb3JtLFxyXG4gIGFkZEF2YXRhckZvcm0sXHJcbiAgcHJvZmlsZU5hbWVJbnB1dCxcclxuICBwcm9maWxlSm9iSW5wdXQsXHJcbiAgZWRpdFByb2ZpbGVCdXR0b24sXHJcbiAgYWRkQ2FyZEJ1dHRvbixcclxuICBwcm9maWxlSW1hZ2UsXHJcbiAgcHJvZmlsZUltYWdlQ29udGFpbmVyLFxyXG4gIHNldHRpbmdzLFxyXG4gIGFkZEF2YXRhckJ1dHRvbixcclxuICBlZGl0UHJvZmlsZVN1Ym1pdEJ1dHRvbixcclxuICBhZGRDYXJkU3VibWl0QnV0dG9uLFxyXG4gIGF2YXRhclN1Ym1pdEJ1dHRvbixcclxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcblxyXG5sZXQgdXNlcklkO1xyXG5sZXQgc2VjdGlvbjtcclxuXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICBwcm9maWxlTmFtZVNlbGVjdG9yOiBcIi5wcm9maWxlX190aXRsZS1uYW1lXCIsXHJcbiAgcHJvZmlsZUpvYlNlbGVjdG9yOiBcIi5wcm9maWxlX19zdWJ0aXRsZS1qb2JcIixcclxuICBwcm9maWxlQXZhdGFyU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2ltYWdlXCIsXHJcbn0pO1xyXG5cclxuUHJvbWlzZS5hbGwoW2FwaS5nZXRJbml0aWFsQ2FyZHMoKSwgYXBpLmdldFVzZXJJbmZvKCldKS50aGVuKFxyXG4gIChbY2FyZERhdGEsIHVzZXJEYXRhXSkgPT4ge1xyXG4gICAgc2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gICAgICB7XHJcbiAgICAgICAgaXRlbXM6IGNhcmREYXRhLFxyXG4gICAgICAgIHJlbmRlcmVyOiAoZGF0YSkgPT4gc2VjdGlvbi5hZGRJdGVtKGNyZWF0ZUNhcmQoZGF0YSkpLFxyXG4gICAgICB9LFxyXG4gICAgICBcIi5lbGVtZW50c19fbGlzdFwiXHJcbiAgICApO1xyXG4gICAgdXNlcklkID0gdXNlckRhdGEuX2lkO1xyXG4gICAgc2VjdGlvbi5yZW5kZXJJdGVtcygpO1xyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8oe1xyXG4gICAgICBwcm9maWxlTmFtZUlucHV0OiB1c2VyRGF0YS5uYW1lLFxyXG4gICAgICBwcm9maWxlSm9iSW5wdXQ6IHVzZXJEYXRhLmFib3V0LFxyXG4gICAgfSk7XHJcbiAgICBwcm9maWxlSW1hZ2VDb250YWluZXIucHJlcGVuZChwcm9maWxlSW1hZ2UpO1xyXG5cclxuICAgIHVzZXJJbmZvLnNldFVzZXJBdmF0YXIocHJvZmlsZUltYWdlLCB1c2VyRGF0YS5hdmF0YXIpO1xyXG4gIH1cclxuKTtcclxuXHJcbmNvbnN0IHByZXZpZXdJbWFnZU1vZGFsID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiLnBvcHVwX3R5cGVfaW1hZ2VcIik7XHJcbnByZXZpZXdJbWFnZU1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBjb25maXJtTW9kYWwgPSBuZXcgUG9wdXBXaXRoU3VibWl0KFwiLnBvcHVwX3R5cGVfZGVsZXRlLWNhcmRcIik7XHJcbmNvbmZpcm1Nb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuZnVuY3Rpb24gY3JlYXRlQ2FyZChkYXRhKSB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxyXG4gICAge1xyXG4gICAgICBkYXRhLFxyXG4gICAgICBoYW5kbGVDYXJkQ2xpY2s6ICgpID0+IHtcclxuICAgICAgICBwcmV2aWV3SW1hZ2VNb2RhbC5vcGVuKGRhdGEpO1xyXG4gICAgICB9LFxyXG4gICAgICBoYW5kbGVMaWtlSWNvbjogKGlkKSA9PiB7XHJcbiAgICAgICAgY29uc3QgaXNBbHJlYWR5TGlrZWQgPSBjYXJkLmlzTGlrZWQoKTtcclxuXHJcbiAgICAgICAgaWYgKGlzQWxyZWFkeUxpa2VkKSB7XHJcbiAgICAgICAgICBhcGkuZGlzbGlrZUNhcmQoaWQpLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICBjYXJkLmxpa2VDYXJkKHJlcy5saWtlcyk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgYXBpLmxpa2VDYXJkKGlkKS50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgY2FyZC5saWtlQ2FyZChyZXMubGlrZXMpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICBoYW5kbGVEZWxldGVJY29uOiAoaWQpID0+IHtcclxuICAgICAgICBjb25maXJtTW9kYWwub3BlbigpO1xyXG5cclxuICAgICAgICBjb25maXJtTW9kYWwuc2V0QWN0aW9uKCgpID0+IHtcclxuICAgICAgICAgIGFwaS5kZWxldGVDYXJkKGlkKS50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgY2FyZC5yZW1vdmVDYXJkKCk7XHJcbiAgICAgICAgICAgIGNvbmZpcm1Nb2RhbC5jbG9zZSgpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAgdGVtcGxhdGVDYXJkU2VsZWN0b3IsXHJcbiAgICB1c2VySWRcclxuICApO1xyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcclxuICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbn1cclxuXHJcbmNvbnN0IGVkaXRNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiLnBvcHVwX3R5cGVfZWRpdFwiLCBzdW1iaXRFZGl0UHJvZmlsZUZvcm0pO1xyXG5lZGl0TW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmZ1bmN0aW9uIHN1bWJpdEVkaXRQcm9maWxlRm9ybShkYXRhKSB7XHJcbiAgaW1wcm92ZVVYKGVkaXRQcm9maWxlU3VibWl0QnV0dG9uLCBcIlNhdmluZy4uLlwiKTtcclxuICBhcGkuc2V0VXNlckluZm8oZGF0YS5uYW1lLCBkYXRhLmpvYikudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgaW1wcm92ZVVYKGVkaXRQcm9maWxlU3VibWl0QnV0dG9uLCBcIlNhdmVcIik7XHJcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7XHJcbiAgICAgIHByb2ZpbGVOYW1lSW5wdXQ6IGRhdGEubmFtZSxcclxuICAgICAgcHJvZmlsZUpvYklucHV0OiBkYXRhLmFib3V0LFxyXG4gICAgfSk7XHJcbiAgICBlZGl0TW9kYWwuY2xvc2UoKTtcclxuICB9KTtcclxufVxyXG5cclxuY29uc3QgYWRkQ2FyZE1vZGFsID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgXCIucG9wdXBfdHlwZV9hZGQtY2FyZFwiLFxyXG4gIHN1Ym1pdEFkZENhcmRGb3JtXHJcbik7XHJcbmFkZENhcmRNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuZnVuY3Rpb24gc3VibWl0QWRkQ2FyZEZvcm0oZGF0YSkge1xyXG4gIGltcHJvdmVVWChhZGRDYXJkU3VibWl0QnV0dG9uLCBcIkNyZWF0aW5nLi4uXCIpO1xyXG4gIGFwaS5jcmVhdGVDYXJkKGRhdGEpLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgY3JlYXRlQ2FyZChyZXMpO1xyXG4gICAgaW1wcm92ZVVYKGFkZENhcmRTdWJtaXRCdXR0b24sIFwiQ3JlYXRlXCIpO1xyXG4gICAgc2VjdGlvbi5hZGRJdGVtKGNyZWF0ZUNhcmQocmVzKSk7XHJcbiAgICBhZGRDYXJkTW9kYWwuY2xvc2UoKTtcclxuICB9KTtcclxufVxyXG5cclxuY29uc3QgYWRkQXZhdGFyTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIi5wb3B1cF90eXBlX2F2YXRhclwiLFxyXG4gIHN1Ym1pdEFkZEF2YXRhckZvcm1cclxuKTtcclxuYWRkQXZhdGFyTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmZ1bmN0aW9uIHN1Ym1pdEFkZEF2YXRhckZvcm0odXJsKSB7XHJcbiAgaW1wcm92ZVVYKGF2YXRhclN1Ym1pdEJ1dHRvbiwgXCJTYXZpbmcuLi5cIik7XHJcbiAgYXBpLnNldFVzZXJBdmF0YXIodXJsKS50aGVuKChyZXMpID0+IHtcclxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHByb2ZpbGVJbWFnZSwgcmVzLmF2YXRhcik7XHJcbiAgICBpbXByb3ZlVVgoYXZhdGFyU3VibWl0QnV0dG9uLCBcIlNhdmVcIik7XHJcbiAgICBzZXRVc2VyQXZhdGFyKHJlcyk7XHJcbiAgICBhZGRBdmF0YXJNb2RhbC5jbG9zZSgpO1xyXG4gIH0pO1xyXG59XHJcblxyXG4vL1xyXG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBlZGl0UHJvZmlsZUZvcm0pO1xyXG5jb25zdCBhZGRDYXJkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBhZGRDYXJkRm9ybSk7XHJcbmNvbnN0IGFkZEF2YXRhckZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgYWRkQXZhdGFyRm9ybSk7XHJcblxyXG5lZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmFkZENhcmRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuYWRkQXZhdGFyRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5mdW5jdGlvbiBmaWxsUHJvZmlsZUZvcm1QcmV2aW91c0lucHV0KCkge1xyXG4gIGNvbnN0IHsgbmFtZSwgam9iIH0gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIHByb2ZpbGVOYW1lSW5wdXQudmFsdWUgPSBuYW1lO1xyXG4gIHByb2ZpbGVKb2JJbnB1dC52YWx1ZSA9IGpvYjtcclxufVxyXG5cclxuLy9mdW5jdGlvbiBmaWxsQXZhdGFyRm9ybVByZXZpb3VzSW1hZ2UoKSB7XHJcbi8vY29uc3QgbGluayA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbi8vcHJvZmlsZUltYWdlLnZhbHVlID0gbGluaztcclxuLy99XHJcblxyXG5lZGl0UHJvZmlsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGZpbGxQcm9maWxlRm9ybVByZXZpb3VzSW5wdXQoKTtcclxuICBlZGl0Rm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxuICBlZGl0TW9kYWwub3BlbigpO1xyXG59KTtcclxuXHJcbmFkZENhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBhZGRDYXJkRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxuICBhZGRDYXJkTW9kYWwub3BlbigpO1xyXG59KTtcclxuXHJcbmFkZEF2YXRhckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIC8vZmlsbEF2YXRhckZvcm1QcmV2aW91c0ltYWdlKCk7XHJcbiAgYWRkQXZhdGFyRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxuICBhZGRBdmF0YXJNb2RhbC5vcGVuKCk7XHJcbn0pO1xyXG4iLCJleHBvcnQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHtcclxuICAgIHByb2ZpbGVOYW1lU2VsZWN0b3IsXHJcbiAgICBwcm9maWxlSm9iU2VsZWN0b3IsXHJcbiAgfSkge1xyXG4gICAgdGhpcy5fcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVOYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcHJvZmlsZUpvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZmlsZUpvYlNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmFtZTogdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQsXHJcbiAgICAgIGpvYjogdGhpcy5fcHJvZmlsZUpvYi50ZXh0Q29udGVudCxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh7IHByb2ZpbGVOYW1lSW5wdXQsIHByb2ZpbGVKb2JJbnB1dCB9KSB7XHJcbiAgICB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IHByb2ZpbGVOYW1lSW5wdXQ7XHJcbiAgICB0aGlzLl9wcm9maWxlSm9iLnRleHRDb250ZW50ID0gcHJvZmlsZUpvYklucHV0O1xyXG4gIH1cclxuXHJcbnNldFVzZXJBdmF0YXIoIGF2YXRhckltYWdlLCBhdmF0YXIpIHtcclxuICB0aGlzLl9hdmF0YXIgPSAgYXZhdGFySW1hZ2U7XHJcbiAgdGhpcy5fYXZhdGFyLnNyYyA9IGF2YXRhcjtcclxufVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcblxyXG4gICAgdGhpcy5faW1hZ2VDYXJkTW9kYWwgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2ltYWdlQ2FyZENhcHRpb25Nb2RhbCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2NhcHRpb25cIik7XHJcbiAgfVxyXG5cclxuICBvcGVuID0gKGRhdGEpID0+IHtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG5cclxuICAgIHRoaXMuX2ltYWdlQ2FyZENhcHRpb25Nb2RhbC50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9pbWFnZUNhcmRNb2RhbC5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5faW1hZ2VDYXJkTW9kYWwuYWx0ID0gYExhbmRzY2FwZSBpbWFnZSBmcm9tIGEgcGxhY2UgbmFtZWQgJHt0aGlzLl9uYW1lfWA7XHJcbiAgfTtcclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aFN1Ym1pdCBleHRlbmRzIFBvcHVwIHtcclxuICBzZXRBY3Rpb24oYWN0aW9uKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRIYW5kbGVyID0gYWN0aW9uO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEhhbmRsZXIoKTtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsInRlbXBsYXRlQ2FyZFNlbGVjdG9yIiwidXNlcklkIiwiZGF0YSIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZUxpa2VJY29uIiwiaGFuZGxlRGVsZXRlSWNvbiIsInRoaXMiLCJfbGlzdEl0ZW0iLCJfZ2V0VGVtcGxhdGUiLCJfdGl0bGUiLCJxdWVyeVNlbGVjdG9yIiwiX2ltYWdlIiwidGV4dENvbnRlbnQiLCJfbmFtZSIsInNyYyIsIl9saW5rIiwiYWx0IiwiX2FkZEV2ZW50TGlzdGVuZXJzIiwiX293bmVySWQiLCJfdXNlcklkIiwiX2RlbGV0ZUJ1dHRvbiIsInN0eWxlIiwiZGlzcGxheSIsIl9saWtlcyIsImxlbmd0aCIsImlzTGlrZWQiLCJsaWtlQ2FyZCIsIm5hbWUiLCJsaW5rIiwibGlrZXMiLCJfdGVtcGxhdGVDYXJkU2VsZWN0b3IiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZURlbGV0ZUljb24iLCJfaGFuZGxlTGlrZUljb24iLCJfaWQiLCJvd25lciIsImRvY3VtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsInNvbWUiLCJwcmVzb24iLCJyZW1vdmVDYXJkIiwicmVtb3ZlIiwibmV3TGlrZXMiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJfbGlrZUJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJzZXR0aW5ncyIsImZvcm0iLCJfaW5wdXRzIiwiZXZlcnkiLCJpbnB1dCIsInZhbGlkaXR5IiwidmFsaWQiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX3NldHRpbmdzIiwiX2lzRm9ybVZhbGlkIiwiX2VuYWJsZVN1Ym1pdEJ1dHRvbiIsIl9idXR0b24iLCJfZGlzYWJsZVN1Ym1pdEJ1dHRvbiIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9mb3JtIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJfY2hlY2tWYWxpZGl0eSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl9zaG93RXJyb3IiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiZXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImlkIiwiYWRkIiwiX2hpZGVFcnJvciIsImJ1dHRvbiIsImRpc2FibGVkIiwicmVzZXRWYWxpZGF0aW9uIiwiZW5hYmxlVmFsaWRhdGlvbiIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwia2V5IiwiY2xvc2UiLCJ0YXJnZXQiLCJjb250YWlucyIsIl9wb3B1cCIsImJpbmQiLCJvcGVuIiwiX2hhbmRsZUVzY0Nsb3NlIiwiX2hhbmRsZU92ZXJsYXlDbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzZXRFdmVudExpc3RlbmVycyIsIlBvcHVwV2l0aEZvcm0iLCJwb3B1cCIsInN1Ym1pdEhhbmRsZXIiLCJzdXBlciIsIl9zdWJtaXRIYW5kbGVyIiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXRWYWx1ZXMiLCJ2YWx1ZSIsInJlc2V0IiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsImVsZW1lbnQiLCJfZWxlbWVudCIsImFkZEl0ZW0iLCJwcmVwZW5kIiwiY3VzdG9tRmV0Y2giLCJ1cmwiLCJoZWFkZXJzIiwiZmV0Y2giLCJ0aGVuIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1c1RleHQiLCJjYXRjaCIsImNvbnNvbGUiLCJsb2ciLCJpbXByb3ZlVVgiLCJ0ZXh0IiwiYXBpIiwiYmFzZVVybCIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJnZXRJbml0aWFsQ2FyZHMiLCJnZXRVc2VySW5mbyIsInNldFVzZXJJbmZvIiwiYWJvdXQiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImNyZWF0ZUNhcmQiLCJkZWxldGVDYXJkIiwiY2FyZElkIiwiZGlzbGlrZUNhcmQiLCJzZXRVc2VyQXZhdGFyIiwiYXZhdGFyIiwiYXV0aG9yaXphdGlvbiIsImVkaXRQcm9maWxlTW9kYWwiLCJhZGROZXdDYXJkTW9kYWwiLCJhZGROZXdBdmF0YXJNb2RhbCIsImVkaXRQcm9maWxlRm9ybSIsImFkZENhcmRGb3JtIiwiYWRkQXZhdGFyRm9ybSIsInByb2ZpbGVOYW1lSW5wdXQiLCJwcm9maWxlSm9iSW5wdXQiLCJlZGl0UHJvZmlsZUJ1dHRvbiIsImFkZENhcmRCdXR0b24iLCJhZGRBdmF0YXJCdXR0b24iLCJwcm9maWxlSW1hZ2UiLCJwcm9maWxlSW1hZ2VDb250YWluZXIiLCJlZGl0UHJvZmlsZVN1Ym1pdEJ1dHRvbiIsImFkZENhcmRTdWJtaXRCdXR0b24iLCJhdmF0YXJTdWJtaXRCdXR0b24iLCJzZWN0aW9uIiwidXNlckluZm8iLCJwcm9maWxlTmFtZVNlbGVjdG9yIiwicHJvZmlsZUpvYlNlbGVjdG9yIiwiX3Byb2ZpbGVOYW1lIiwiX3Byb2ZpbGVKb2IiLCJqb2IiLCJhdmF0YXJJbWFnZSIsIl9hdmF0YXIiLCJwcm9maWxlQXZhdGFyU2VsZWN0b3IiLCJhbGwiLCJjYXJkRGF0YSIsInVzZXJEYXRhIiwicHJldmlld0ltYWdlTW9kYWwiLCJfaW1hZ2VDYXJkQ2FwdGlvbk1vZGFsIiwiX2ltYWdlQ2FyZE1vZGFsIiwiY29uZmlybU1vZGFsIiwic2V0QWN0aW9uIiwiYWN0aW9uIiwiY2FyZCIsImdlbmVyYXRlQ2FyZCIsImVkaXRNb2RhbCIsImFkZENhcmRNb2RhbCIsImFkZEF2YXRhck1vZGFsIiwiZWRpdEZvcm1WYWxpZGF0b3IiLCJGb3JtVmFsaWRhdG9yIiwiYWRkQ2FyZEZvcm1WYWxpZGF0b3IiLCJhZGRBdmF0YXJGb3JtVmFsaWRhdG9yIiwiZmlsbFByb2ZpbGVGb3JtUHJldmlvdXNJbnB1dCJdLCJzb3VyY2VSb290IjoiIn0=