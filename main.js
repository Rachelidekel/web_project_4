!function(){"use strict";class e{constructor(e,t,s){let{data:i,handleCardClick:r,handleLikeIcon:n,handleDeleteIcon:o}=e;var a,l;l=()=>(this._listItem=this._getTemplate(),this._title=this._listItem.querySelector(".element__title-name"),this._image=this._listItem.querySelector(".element__item"),this._likesCount=this._listItem.querySelector(".element__likes-count"),this._likesCount.textContent=this._likes.length,this._title.textContent=this._name,this._image.src=this._link,this._image.alt="Landscape image from a place named ".concat(this._name),this._addEventListeners(),this._ownerId!==this._userId&&(this._deleteButton.style.display="none"),this.isLiked()&&this.likeCard(this._likes),this._listItem),(a="generateCard")in this?Object.defineProperty(this,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):this[a]=l,this._name=i.name,this._link=i.link,this._likes=i.likes,this._templateCardSelector=t,this._handleCardClick=r,this._handleDeleteIcon=o,this._handleLikeIcon=n,this._id=i._id,this._userId=s,this._ownerId=i.owner._id}_getTemplate(){return document.querySelector(this._templateCardSelector).content.querySelector(".element").cloneNode(!0)}isLiked(){return this._likes.some((e=>e._id===this._userId))}removeCard(){this._listItem.remove(),this._listItem=null}likeCard(e){this._likes=e,this._likesCount.textContent=this._likes.length,this._listItem.querySelector(".element__title-button").classList.toggle("element__title-button_active")}_addEventListeners(){this._likeButton=this._listItem.querySelector(".element__title-button"),this._deleteButton=this._listItem.querySelector(".element__delete-button"),this._likeButton.addEventListener("click",(()=>{this._handleLikeIcon(this._id)})),this._deleteButton.addEventListener("click",(()=>{this._handleDeleteIcon(this._id)})),this._image.addEventListener("click",(()=>{this._handleCardClick(this._name,this._link)}))}}function t(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var s=class{constructor(e,s){t(this,"_isFormValid",(()=>this._inputs.every((e=>!0===e.validity.valid)))),t(this,"_toggleButtonState",(()=>{const{inactiveButtonClass:e}=this._settings;this._isFormValid()?this._enableSubmitButton(this._button,e):this._disableSubmitButton(this._button,e)})),t(this,"_setEventListeners",(()=>{const{inputSelector:e,submitButtonSelector:t}=this._settings;this._inputs=[...this._form.querySelectorAll(e)],this._button=this._form.querySelector(t),this._inputs.forEach((e=>{e.addEventListener("input",(()=>{this._checkValidity(e,this._settings),this._toggleButtonState()}))}))})),this._settings=e,this._form=s}_showError(e){const{inputErrorClass:t,errorClass:s}=this._settings,i=e.validationMessage,r=this._form.querySelector("#".concat(e.id,"-error"));r.textContent=i,r.classList.add(s),e.classList.add(t)}_hideError(e){const{inputErrorClass:t,errorClass:s}=this._settings,i=this._form.querySelector("#".concat(e.id,"-error"));i.textContent="",i.classList.remove(s),e.classList.remove(t)}_checkValidity(e){e.validity.valid?this._hideError(e):this._showError(e)}_disableSubmitButton(e){const{inactiveButtonClass:t}=this._settings;e.disabled=!0,e.classList.add(t)}_enableSubmitButton(e){const{inactiveButtonClass:t}=this._settings;e.disabled=!1,e.classList.remove(t)}resetValidation(){this._inputs.forEach((e=>{this._hideError(e)})),this._toggleButtonState()}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}};function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class r{constructor(e){i(this,"_handleEscClose",(e=>{"Escape"===e.key&&this.close()})),i(this,"_handleOverlayClose",(e=>{(e.target.classList.contains("popup")||e.target.classList.contains("popup__close-button"))&&this.close()})),this._popup=document.querySelector(e),this.close.bind(this)}open(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose),document.addEventListener("mousedown",this._handleOverlayClose)}close(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose),document.removeEventListener("mousedown",this._handleOverlayClose)}setEventListeners(){this._popup.querySelector(".popup__close-icon").addEventListener("click",(()=>{this.close()}))}}class n extends r{constructor(e,t){super(e),this._submitHandler=t,this._form=this._popup.querySelector(".popup__form"),this._inputs=[...this._form.querySelectorAll(".form__input")],this._submitButton=this._form.querySelector(".form__button"),this._submitButtonText=this._submitButton.textContent}_getInputValues(){const e={};return this._inputs.forEach((t=>{e[t.name]=t.value})),e}renderLoading(e){this._submitButton.textContent=e?"Saving...":this._submitButtonText}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._submitHandler(this._getInputValues())}))}close(){super.close(),this._form.reset()}}class o{constructor(e,t){let{items:s,renderer:i}=e;this._items=s,this._renderer=i,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._element=this._renderer(e)}))}addItem(e){this._container.prepend(e)}}const a=new class{constructor(e){let{baseUrl:t,headers:s}=e;var i,r;r=(e,t)=>fetch(e,t).then((e=>e.ok?e.json():Promise.reject(e.statusText))),(i="_customFetch")in this?Object.defineProperty(this,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[i]=r,this._baseUrl=t,this._headers=s}getInitialCards(){return this._customFetch("".concat(this._baseUrl,"/cards"),{headers:this._headers})}getUserInfo(){return this._customFetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers})}setUserInfo(e,t){return this._customFetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers,method:"PATCH",body:JSON.stringify({name:e,about:t})})}createCard(e){return this._customFetch("".concat(this._baseUrl,"/cards"),{headers:this._headers,method:"POST",body:JSON.stringify(e)})}deleteCard(e){return this._customFetch("".concat(this._baseUrl,"/cards/").concat(e),{headers:this._headers,method:"DELETE"})}likeCard(e){return this._customFetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{headers:this._headers,method:"PUT"})}dislikeCard(e){return this._customFetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{headers:this._headers,method:"DELETE"})}setUserAvatar(e){return this._customFetch("".concat(this._baseUrl,"/users/me/avatar"),{headers:this._headers,method:"PATCH",body:JSON.stringify({avatar:e})})}}({baseUrl:"https://around.nomoreparties.co/v1/group-1",headers:{authorization:"a0dd5829-1b51-4f9b-93c7-6d4f8e85cb31","Content-Type":"application/json"}}),l=document.querySelector(".popup_type_edit"),c=document.querySelector(".popup_type_add-card"),_=document.querySelector(".popup_type_avatar"),h=l.querySelector(".popup__form"),d=c.querySelector(".popup__form"),u=_.querySelector(".popup__form"),p=document.querySelector(".form__input_type_name"),m=document.querySelector(".form__input_type_job"),b=document.querySelector(".profile__open-button"),f=document.querySelector(".profile__add-button"),v=document.querySelector(".profile__avatar-overlay"),g=document.querySelector(".profile__image"),y=document.querySelector(".profile__avatar"),C={inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_disabled",inputErrorClass:"form__input_type_error",errorClass:"popup__error_visible"};let S,L;const k=new class{constructor(e){let{profileNameSelector:t,profileJobSelector:s,avatarSelector:i}=e;this._profileName=document.querySelector(t),this._profileJob=document.querySelector(s),this._avatar=document.querySelector(i)}getUserInfo(){return{name:this._profileName.textContent,job:this._profileJob.textContent}}setUserInfo(e){let{profileNameInput:t,profileJobInput:s}=e;this._profileName.textContent=t,this._profileJob.textContent=s}setUserAvatar(e){let{avatarImageInput:t}=e;this._avatar.src=t}}({profileNameSelector:".profile__title-name",profileJobSelector:".profile__subtitle-job",avatarSelector:".profile__image"});g.alt="user profile avatar",g.classList.add("profile__image"),Promise.all([a.getInitialCards(),a.getUserInfo()]).then((e=>{let[t,s]=e;L=new o({items:t,renderer:e=>L.addItem(q(e))},".elements__list"),S=s._id,L.renderItems(),k.setUserInfo({profileNameInput:s.name,profileJobInput:s.about}),y.prepend(g),k.setUserAvatar({avatarImageInput:s.avatar})})).catch(console.log);const I=new class extends r{constructor(e){var t,s;super(e),s=e=>{super.open(),this._name=e.name,this._link=e.link,this._imageCardCaptionModal.textContent=this._name,this._imageCardModal.src=this._link,this._imageCardModal.alt="Landscape image from a place named ".concat(this._name)},(t="open")in this?Object.defineProperty(this,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):this.open=s,this._imageCardModal=this._popup.querySelector(".popup__image"),this._imageCardCaptionModal=this._popup.querySelector(".popup__caption")}}(".popup_type_image");I.setEventListeners();const E=new class extends r{setAction(e){this._submitHandler=e}setEventListeners(){this._popup.addEventListener("submit",(e=>{e.preventDefault(),this._submitHandler()})),super.setEventListeners()}}(".popup_type_delete-card");function q(t){const s=new e({data:t,handleCardClick:()=>{I.open(t)},handleLikeIcon:e=>{s.isLiked()?a.dislikeCard(e).then((e=>{s.likeCard(e.likes)})).catch(console.log):a.likeCard(e).then((e=>{s.likeCard(e.likes)})).catch(console.log)},handleDeleteIcon:e=>{E.open(),E.setAction((()=>{a.deleteCard(e).then((e=>{s.removeCard(),E.close()})).catch(console.log)}))}},".element__template",S);return s.generateCard()}E.setEventListeners();const w=new n(".popup_type_edit",(function(e){w.renderLoading(!0),a.setUserInfo(e.name,e.job).then((e=>{k.setUserInfo({profileNameInput:e.name,profileJobInput:e.about}),w.close()})).catch(console.log).finally((()=>w.renderLoading(!1)))}));w.setEventListeners();const U=new n(".popup_type_add-card",(function(e){U.renderLoading(!0),a.createCard(e).then((e=>{q(e),L.addItem(q(e)),U.close()})).catch(console.log).finally((()=>U.renderLoading(!1)))}));U.setEventListeners();const B=new n(".popup_type_avatar",(function(e){B.renderLoading(!0),a.setUserAvatar(e.link).then((e=>{k.setUserAvatar({avatarImageInput:e.avatar}),B.close()})).catch(console.log).finally((()=>B.renderLoading(!1)))}));B.setEventListeners();const x=new s(C,h),V=new s(C,d),j=new s(C,u);x.enableValidation(),V.enableValidation(),j.enableValidation(),b.addEventListener("click",(()=>{!function(){const{name:e,job:t}=k.getUserInfo();p.value=e,m.value=t}(),x.resetValidation(),w.open()})),f.addEventListener("click",(()=>{V.resetValidation(),U.open()})),v.addEventListener("click",(()=>{j.resetValidation(),B.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxFQUFhcEYsZUFBYyxRQVJqRW9GLEVBQWEvRixvQkFXYixNQUFNZ0csRUFBaUIsSUFBSS9GLEVBQ3pCLHNCQUtGLFNBQTZCaEcsR0FDM0IrTCxFQUFlckYsZUFBYyxHQUM5QmUsRUFBSTJCLGNBQWNwSixFQUFLMkIsTUFDcEJtRyxNQUFNOUgsSUFDTHFLLEVBQVNqQixjQUFjLENBQUV5QixpQkFBa0I3SyxFQUFLcUosU0FDaEQwQyxFQUFlekcsV0FFaEIyRixNQUFNQyxRQUFRQyxLQUNkVSxTQUFRLElBQU1FLEVBQWVyRixlQUFjLFFBVi9DcUYsRUFBZWhHLG9CQWNmLE1BQU1pRyxFQUFvQixJQUFJQyxFQUFjbEosRUFBVTJHLEdBQ2hEd0MsRUFBdUIsSUFBSUQsRUFBY2xKLEVBQVU0RyxHQUNuRHdDLEVBQXlCLElBQUlGLEVBQWNsSixFQUFVNkcsR0FFM0RvQyxFQUFrQmpILG1CQUNsQm1ILEVBQXFCbkgsbUJBQ3JCb0gsRUFBdUJwSCxtQkFRdkJnRixFQUFrQmpILGlCQUFpQixTQUFTLE1BTjVDLFdBQ0UsTUFBTSxLQUFFcEIsRUFBRixJQUFRa0osR0FBUVAsRUFBUzVCLGNBQy9Cb0IsRUFBaUJwRCxNQUFRL0UsRUFDekJvSSxFQUFnQnJELE1BQVFtRSxFQUl4QndCLEdBQ0FKLEVBQWtCbEgsa0JBQ2xCOEcsRUFBVWpHLFVBR1pxRSxFQUFjbEgsaUJBQWlCLFNBQVMsS0FDdENvSixFQUFxQnBILGtCQUNyQmdILEVBQWFuRyxVQUdmc0UsRUFBZ0JuSCxpQkFBaUIsU0FBUyxLQUN4Q3FKLEVBQXVCckgsa0JBQ3ZCaUgsRUFBZXBHLFUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW1fd2ViX3Byb2plY3RfOC8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtX3dlYl9wcm9qZWN0XzgvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bV93ZWJfcHJvamVjdF84Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtX3dlYl9wcm9qZWN0XzgvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bV93ZWJfcHJvamVjdF84Ly4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW1fd2ViX3Byb2plY3RfOC8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW1fd2ViX3Byb2plY3RfOC8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtX3dlYl9wcm9qZWN0XzgvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtX3dlYl9wcm9qZWN0XzgvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW1fd2ViX3Byb2plY3RfOC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bV93ZWJfcHJvamVjdF84Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoU3VibWl0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHsgZGF0YSwgaGFuZGxlQ2FyZENsaWNrLCBoYW5kbGVMaWtlSWNvbiwgaGFuZGxlRGVsZXRlSWNvbiB9LFxyXG4gICAgdGVtcGxhdGVDYXJkU2VsZWN0b3IsXHJcbiAgICB1c2VySWRcclxuICApIHtcclxuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5fbGlrZXMgPSBkYXRhLmxpa2VzO1xyXG4gICAgdGhpcy5fdGVtcGxhdGVDYXJkU2VsZWN0b3IgPSB0ZW1wbGF0ZUNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUljb24gPSBoYW5kbGVEZWxldGVJY29uO1xyXG4gICAgdGhpcy5faGFuZGxlTGlrZUljb24gPSBoYW5kbGVMaWtlSWNvbjtcclxuICAgIHRoaXMuX2lkID0gZGF0YS5faWQ7XHJcbiAgICB0aGlzLl91c2VySWQgPSB1c2VySWQ7XHJcbiAgICB0aGlzLl9vd25lcklkID0gZGF0YS5vd25lci5faWQ7XHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCB0ZW1wbGF0ZUxpc3RJdGVtID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fdGVtcGxhdGVDYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudFwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG5cclxuICAgIHJldHVybiB0ZW1wbGF0ZUxpc3RJdGVtO1xyXG4gIH1cclxuXHJcbiAgaXNMaWtlZCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9saWtlcy5zb21lKChwcmVzb24pID0+IHByZXNvbi5faWQgPT09IHRoaXMuX3VzZXJJZCk7XHJcbiAgfVxyXG5cclxuICByZW1vdmVDYXJkKCkge1xyXG4gICAgdGhpcy5fbGlzdEl0ZW0ucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9saXN0SXRlbSA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBsaWtlQ2FyZChuZXdMaWtlcykge1xyXG4gICAgdGhpcy5fbGlrZXMgPSBuZXdMaWtlcztcclxuICAgdGhpcy5fbGlrZXNDb3VudC50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aFxyXG5cclxuICAgIHRoaXMuX2xpc3RJdGVtXHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX3RpdGxlLWJ1dHRvblwiKVxyXG4gICAgICAuY2xhc3NMaXN0LnRvZ2dsZShcImVsZW1lbnRfX3RpdGxlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgfVxyXG5cclxuICBfYWRkRXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fbGlzdEl0ZW0ucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X190aXRsZS1idXR0b25cIik7XHJcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9saXN0SXRlbS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5lbGVtZW50X19kZWxldGUtYnV0dG9uXCJcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVMaWtlSWNvbih0aGlzLl9pZCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVJY29uKHRoaXMuX2lkKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5faW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX25hbWUsIHRoaXMuX2xpbmspO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZW5lcmF0ZUNhcmQgPSAoKSA9PiB7XHJcbiAgICB0aGlzLl9saXN0SXRlbSA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICB0aGlzLl90aXRsZSA9IHRoaXMuX2xpc3RJdGVtLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fdGl0bGUtbmFtZVwiKTtcclxuICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fbGlzdEl0ZW0ucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19pdGVtXCIpO1xyXG4gICAgdGhpcy5fbGlrZXNDb3VudCA9IHRoaXMuX2xpc3RJdGVtLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fbGlrZXMtY291bnRcIilcclxuICAgIHRoaXMuX2xpa2VzQ291bnQudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XHJcbiAgICB0aGlzLl90aXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9pbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gYExhbmRzY2FwZSBpbWFnZSBmcm9tIGEgcGxhY2UgbmFtZWQgJHt0aGlzLl9uYW1lfWA7XHJcblxyXG4gICAgdGhpcy5fYWRkRXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICBpZiAodGhpcy5fb3duZXJJZCAhPT0gdGhpcy5fdXNlcklkKSB7XHJcbiAgICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuaXNMaWtlZCgpKSB7XHJcbiAgICAgIHRoaXMubGlrZUNhcmQodGhpcy5fbGlrZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0aGlzLl9saXN0SXRlbTtcclxuICB9O1xyXG59XHJcbiIsImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtKSB7XHJcbiAgICB0aGlzLl9zZXR0aW5ncyA9IHNldHRpbmdzO1xyXG4gICAgdGhpcy5fZm9ybSA9IGZvcm07XHJcbiAgfVxyXG5cclxuICBfc2hvd0Vycm9yKGlucHV0KSB7XHJcbiAgICBjb25zdCB7IGlucHV0RXJyb3JDbGFzcywgZXJyb3JDbGFzcyB9ID0gdGhpcy5fc2V0dGluZ3M7XHJcbiAgICBjb25zdCBlcnJvciA9IGlucHV0LnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dC5pZH0tZXJyb3JgKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yO1xyXG5cclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKGVycm9yQ2xhc3MpO1xyXG4gICAgaW5wdXQuY2xhc3NMaXN0LmFkZChpbnB1dEVycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVFcnJvcihpbnB1dCkge1xyXG4gICAgY29uc3QgeyBpbnB1dEVycm9yQ2xhc3MsIGVycm9yQ2xhc3MgfSA9IHRoaXMuX3NldHRpbmdzO1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dC5pZH0tZXJyb3JgKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcblxyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoZXJyb3JDbGFzcyk7XHJcbiAgICBpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKGlucHV0RXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tWYWxpZGl0eShpbnB1dCkge1xyXG4gICAgaWYgKGlucHV0LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX2hpZGVFcnJvcihpbnB1dCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zaG93RXJyb3IoaW5wdXQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2Rpc2FibGVTdWJtaXRCdXR0b24oYnV0dG9uKSB7XHJcbiAgICBjb25zdCB7IGluYWN0aXZlQnV0dG9uQ2xhc3MgfSA9IHRoaXMuX3NldHRpbmdzO1xyXG4gICAgYnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKGluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gIH1cclxuICBfZW5hYmxlU3VibWl0QnV0dG9uKGJ1dHRvbikge1xyXG4gICAgY29uc3QgeyBpbmFjdGl2ZUJ1dHRvbkNsYXNzIH0gPSB0aGlzLl9zZXR0aW5ncztcclxuICAgIGJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaXNGb3JtVmFsaWQgPSAoKSA9PlxyXG4gICAgdGhpcy5faW5wdXRzLmV2ZXJ5KChpbnB1dCkgPT4gaW5wdXQudmFsaWRpdHkudmFsaWQgPT09IHRydWUpO1xyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUgPSAoKSA9PiB7XHJcbiAgICBjb25zdCB7IGluYWN0aXZlQnV0dG9uQ2xhc3MgfSA9IHRoaXMuX3NldHRpbmdzO1xyXG5cclxuICAgIGlmICh0aGlzLl9pc0Zvcm1WYWxpZCgpKSB7XHJcbiAgICAgIHRoaXMuX2VuYWJsZVN1Ym1pdEJ1dHRvbih0aGlzLl9idXR0b24sIGluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fZGlzYWJsZVN1Ym1pdEJ1dHRvbih0aGlzLl9idXR0b24sIGluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycyA9ICgpID0+IHtcclxuICAgIGNvbnN0IHsgaW5wdXRTZWxlY3Rvciwgc3VibWl0QnV0dG9uU2VsZWN0b3IgfSA9IHRoaXMuX3NldHRpbmdzO1xyXG4gICAgdGhpcy5faW5wdXRzID0gWy4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbChpbnB1dFNlbGVjdG9yKV07XHJcbiAgICB0aGlzLl9idXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3Ioc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG5cclxuICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrVmFsaWRpdHkoaW5wdXQsIHRoaXMuX3NldHRpbmdzKTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlRXJyb3IoaW5wdXQpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuY2xvc2UuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChldnQpID0+IHtcclxuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBfaGFuZGxlT3ZlcmxheUNsb3NlID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKFxyXG4gICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwXCIpIHx8XHJcbiAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBfX2Nsb3NlLWJ1dHRvblwiKVxyXG4gICAgKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5faGFuZGxlT3ZlcmxheUNsb3NlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5faGFuZGxlT3ZlcmxheUNsb3NlKTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgY29uc3QgY2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jbG9zZS1pY29uXCIpO1xyXG4gICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXAsIHN1Ym1pdEhhbmRsZXIpIHtcclxuICAgIHN1cGVyKHBvcHVwKTtcclxuICAgIHRoaXMuX3N1Ym1pdEhhbmRsZXIgPSBzdWJtaXRIYW5kbGVyO1xyXG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9pbnB1dHMgPSBbLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm1fX2lucHV0XCIpXTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcIi5mb3JtX19idXR0b25cIilcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblRleHQgPSB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnRcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IGlucHV0VmFsdWVzID0ge307XHJcblxyXG4gICAgdGhpcy5faW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBpbnB1dFZhbHVlcztcclxuICB9XHJcblxyXG4gIHJlbmRlckxvYWRpbmcoaXNMb2FkaW5nKSB7XHJcbiAgICBpZiAoaXNMb2FkaW5nKSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9ICdTYXZpbmcuLi4nO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5fc3VibWl0QnV0dG9uVGV4dDtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEhhbmRsZXIodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuXHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xyXG4gICAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fcmVuZGVyZXIoZWxlbWVudCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG59XHJcblxyXG4iLCJjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgaGVhZGVycyB9KSB7XHJcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcclxuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xyXG4gIH1cclxuXHJcbiAgX2N1c3RvbUZldGNoID0gKHVybCwgaGVhZGVycykgPT4ge1xyXG4gICAgcmV0dXJuIGZldGNoKHVybCwgaGVhZGVycylcclxuICAgICAgLnRoZW4oKHJlcykgPT4gKHJlcy5vayA/IHJlcy5qc29uKCkgOiBQcm9taXNlLnJlamVjdChyZXMuc3RhdHVzVGV4dCkpKVxyXG4gICAgfVxyXG4gXHJcbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2N1c3RvbUZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB0aGlzLl9jdXN0b21GZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8obmFtZSwgYWJvdXQpIHtcclxuICAgIHJldHVybiB0aGlzLl9jdXN0b21GZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICAgIGFib3V0OiBhYm91dCxcclxuICAgICAgfSksXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNyZWF0ZUNhcmQoZGF0YSkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2N1c3RvbUZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiB0aGlzLl9jdXN0b21GZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgbGlrZUNhcmQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fY3VzdG9tRmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGRpc2xpa2VDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2N1c3RvbUZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VyQXZhdGFyKGF2YXRhcikge1xyXG4gICAgcmV0dXJuIHRoaXMuX2N1c3RvbUZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgYXZhdGFyIH0pLFxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwLTFcIixcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcImEwZGQ1ODI5LTFiNTEtNGY5Yi05M2M3LTZkNGY4ZTg1Y2IzMVwiLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgfSxcclxufSk7XHJcbiIsIi8vbW9kYWxzXHJcbmNvbnN0IGVkaXRQcm9maWxlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3R5cGVfZWRpdFwiKTtcclxuY29uc3QgYWRkTmV3Q2FyZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX2FkZC1jYXJkXCIpO1xyXG5jb25zdCBhZGROZXdBdmF0YXJNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdHlwZV9hdmF0YXJcIilcclxuXHJcbi8vXHJcbmV4cG9ydCBjb25zdCB0ZW1wbGF0ZUNhcmRTZWxlY3RvciA9IFwiLmVsZW1lbnRfX3RlbXBsYXRlXCI7XHJcblxyXG4vL2Zvcm1zXHJcbmV4cG9ydCBjb25zdCBlZGl0UHJvZmlsZUZvcm0gPSBlZGl0UHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XHJcbmV4cG9ydCBjb25zdCBhZGRDYXJkRm9ybSA9IGFkZE5ld0NhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xyXG5leHBvcnQgY29uc3QgYWRkQXZhdGFyRm9ybSA9IGFkZE5ld0F2YXRhck1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XHJcblxyXG4vL2lucHV0c1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZU5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIuZm9ybV9faW5wdXRfdHlwZV9uYW1lXCJcclxuKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVKb2JJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9faW5wdXRfdHlwZV9qb2JcIik7XHJcblxyXG5cclxuLy9vcGVuIG1vZGFsIGJ1dHRvbnNcclxuZXhwb3J0IGNvbnN0IGVkaXRQcm9maWxlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5wcm9maWxlX19vcGVuLWJ1dHRvblwiXHJcbik7XHJcbmV4cG9ydCBjb25zdCBhZGRDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xyXG5leHBvcnQgY29uc3QgYWRkQXZhdGFyQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXItb3ZlcmxheVwiKVxyXG5cclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2ltYWdlXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUF2YXRhckNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIucHJvZmlsZV9fYXZhdGFyXCJcclxuKTtcclxuXHJcbi8vc2V0dGluZ3NcclxuZXhwb3J0IGNvbnN0IHNldHRpbmdzID0ge1xyXG4gIGlucHV0U2VsZWN0b3I6IFwiLmZvcm1fX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLmZvcm1fX2J1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwiZm9ybV9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcImZvcm1fX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcInBvcHVwX19lcnJvcl92aXNpYmxlXCIsXHJcbn07XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcbmltcG9ydCB7IENhcmQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IHsgUG9wdXBXaXRoRm9ybSB9IGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhTdWJtaXQgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoU3VibWl0LmpzXCI7XHJcbmltcG9ydCB7IFNlY3Rpb24gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCB7IFVzZXJJbmZvIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IHsgYXBpIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XHJcbmltcG9ydCB7XHJcbiAgdGVtcGxhdGVDYXJkU2VsZWN0b3IsXHJcbiAgZWRpdFByb2ZpbGVGb3JtLFxyXG4gIGFkZENhcmRGb3JtLFxyXG4gIGFkZEF2YXRhckZvcm0sXHJcbiAgcHJvZmlsZU5hbWVJbnB1dCxcclxuICBwcm9maWxlSm9iSW5wdXQsXHJcbiAgZWRpdFByb2ZpbGVCdXR0b24sXHJcbiAgYWRkQ2FyZEJ1dHRvbixcclxuICBwcm9maWxlQXZhdGFyLFxyXG4gIHByb2ZpbGVBdmF0YXJDb250YWluZXIsXHJcbiAgc2V0dGluZ3MsXHJcbiAgYWRkQXZhdGFyQnV0dG9uLFxyXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuXHJcbmxldCB1c2VySWQ7XHJcbmxldCBzZWN0aW9uO1xyXG5cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gIHByb2ZpbGVOYW1lU2VsZWN0b3I6IFwiLnByb2ZpbGVfX3RpdGxlLW5hbWVcIixcclxuICBwcm9maWxlSm9iU2VsZWN0b3I6IFwiLnByb2ZpbGVfX3N1YnRpdGxlLWpvYlwiLFxyXG4gIGF2YXRhclNlbGVjdG9yOiBcIi5wcm9maWxlX19pbWFnZVwiLFxyXG59KTtcclxuXHJcbi8vXHJcbnByb2ZpbGVBdmF0YXIuYWx0ID0gXCJ1c2VyIHByb2ZpbGUgYXZhdGFyXCI7XHJcbnByb2ZpbGVBdmF0YXIuY2xhc3NMaXN0LmFkZChcInByb2ZpbGVfX2ltYWdlXCIpO1xyXG5cclxuUHJvbWlzZS5hbGwoW2FwaS5nZXRJbml0aWFsQ2FyZHMoKSwgYXBpLmdldFVzZXJJbmZvKCldKS50aGVuKFxyXG4gIChbY2FyZERhdGEsIHVzZXJEYXRhXSkgPT4ge1xyXG4gICAgc2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gICAgICB7XHJcbiAgICAgICAgaXRlbXM6IGNhcmREYXRhLFxyXG4gICAgICAgIHJlbmRlcmVyOiAoZGF0YSkgPT4gc2VjdGlvbi5hZGRJdGVtKGNyZWF0ZUNhcmQoZGF0YSkpLFxyXG4gICAgICB9LFxyXG4gICAgICBcIi5lbGVtZW50c19fbGlzdFwiXHJcbiAgICApO1xyXG4gICAgdXNlcklkID0gdXNlckRhdGEuX2lkO1xyXG4gICAgc2VjdGlvbi5yZW5kZXJJdGVtcygpO1xyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8oe1xyXG4gICAgICBwcm9maWxlTmFtZUlucHV0OiB1c2VyRGF0YS5uYW1lLFxyXG4gICAgICBwcm9maWxlSm9iSW5wdXQ6IHVzZXJEYXRhLmFib3V0LFxyXG4gICAgfSk7XHJcblxyXG4gICAgcHJvZmlsZUF2YXRhckNvbnRhaW5lci5wcmVwZW5kKHByb2ZpbGVBdmF0YXIpO1xyXG4gICAgdXNlckluZm8uc2V0VXNlckF2YXRhcih7IGF2YXRhckltYWdlSW5wdXQ6IHVzZXJEYXRhLmF2YXRhciB9KTtcclxuICB9XHJcbikuY2F0Y2goY29uc29sZS5sb2cpOyBcclxuXHJcbmNvbnN0IHByZXZpZXdJbWFnZU1vZGFsID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiLnBvcHVwX3R5cGVfaW1hZ2VcIik7XHJcbnByZXZpZXdJbWFnZU1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBjb25maXJtTW9kYWwgPSBuZXcgUG9wdXBXaXRoU3VibWl0KFwiLnBvcHVwX3R5cGVfZGVsZXRlLWNhcmRcIik7XHJcbmNvbmZpcm1Nb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuZnVuY3Rpb24gY3JlYXRlQ2FyZChkYXRhKSB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxyXG4gICAge1xyXG4gICAgICBkYXRhLFxyXG4gICAgICBoYW5kbGVDYXJkQ2xpY2s6ICgpID0+IHtcclxuICAgICAgICBwcmV2aWV3SW1hZ2VNb2RhbC5vcGVuKGRhdGEpO1xyXG4gICAgICB9LFxyXG4gICAgICBoYW5kbGVMaWtlSWNvbjogKGlkKSA9PiB7XHJcbiAgICAgICAgY29uc3QgaXNBbHJlYWR5TGlrZWQgPSBjYXJkLmlzTGlrZWQoKTtcclxuXHJcbiAgICAgICAgaWYgKGlzQWxyZWFkeUxpa2VkKSB7XHJcbiAgICAgICAgICBhcGkuZGlzbGlrZUNhcmQoaWQpLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICBjYXJkLmxpa2VDYXJkKHJlcy5saWtlcyk7XHJcbiAgICAgICAgICB9KS5jYXRjaChjb25zb2xlLmxvZyk7IDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgYXBpLmxpa2VDYXJkKGlkKS50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgY2FyZC5saWtlQ2FyZChyZXMubGlrZXMpO1xyXG4gICAgICAgICAgfSkuY2F0Y2goY29uc29sZS5sb2cpOyA7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICBoYW5kbGVEZWxldGVJY29uOiAoaWQpID0+IHtcclxuICAgICAgICBjb25maXJtTW9kYWwub3BlbigpO1xyXG5cclxuICAgICAgICBjb25maXJtTW9kYWwuc2V0QWN0aW9uKCgpID0+IHtcclxuICAgICAgICAgIGFwaS5kZWxldGVDYXJkKGlkKS50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgY2FyZC5yZW1vdmVDYXJkKCk7XHJcbiAgICAgICAgICAgIGNvbmZpcm1Nb2RhbC5jbG9zZSgpO1xyXG4gICAgICAgICAgfSkuY2F0Y2goY29uc29sZS5sb2cpOyA7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAgdGVtcGxhdGVDYXJkU2VsZWN0b3IsXHJcbiAgICB1c2VySWRcclxuICApO1xyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcclxuICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbn1cclxuXHJcbmNvbnN0IGVkaXRNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiLnBvcHVwX3R5cGVfZWRpdFwiLCBzdW1iaXRFZGl0UHJvZmlsZUZvcm0pO1xyXG5lZGl0TW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmZ1bmN0aW9uIHN1bWJpdEVkaXRQcm9maWxlRm9ybShkYXRhKSB7XHJcbiAgZWRpdE1vZGFsLnJlbmRlckxvYWRpbmcodHJ1ZSk7XHJcbiAgYXBpLnNldFVzZXJJbmZvKGRhdGEubmFtZSwgZGF0YS5qb2IpLnRoZW4oKGRhdGEpID0+IHtcclxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcclxuICAgICAgcHJvZmlsZU5hbWVJbnB1dDogZGF0YS5uYW1lLFxyXG4gICAgICBwcm9maWxlSm9iSW5wdXQ6IGRhdGEuYWJvdXQsXHJcbiAgICB9KTsgZWRpdE1vZGFsLmNsb3NlKCk7XHJcbiAgfSkuY2F0Y2goY29uc29sZS5sb2cpLmZpbmFsbHkoKCkgPT4gZWRpdE1vZGFsLnJlbmRlckxvYWRpbmcoZmFsc2UpKTsgIFxyXG59XHJcblxyXG5jb25zdCBhZGRDYXJkTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIi5wb3B1cF90eXBlX2FkZC1jYXJkXCIsXHJcbiAgc3VibWl0QWRkQ2FyZEZvcm1cclxuKTtcclxuYWRkQ2FyZE1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5mdW5jdGlvbiBzdWJtaXRBZGRDYXJkRm9ybShkYXRhKSB7XHJcbiAgYWRkQ2FyZE1vZGFsLnJlbmRlckxvYWRpbmcodHJ1ZSk7XHJcbiAgYXBpLmNyZWF0ZUNhcmQoZGF0YSkudGhlbigocmVzKSA9PiB7XHJcbiAgICBjcmVhdGVDYXJkKHJlcyk7XHJcbiAgICBzZWN0aW9uLmFkZEl0ZW0oY3JlYXRlQ2FyZChyZXMpKVxyXG4gICAgYWRkQ2FyZE1vZGFsLmNsb3NlKCk7XHJcbiAgfSkuY2F0Y2goY29uc29sZS5sb2cpLmZpbmFsbHkoKCkgPT4gYWRkQ2FyZE1vZGFsLnJlbmRlckxvYWRpbmcoZmFsc2UpKSBcclxufVxyXG5cclxuY29uc3QgYWRkQXZhdGFyTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIi5wb3B1cF90eXBlX2F2YXRhclwiLFxyXG4gIHN1Ym1pdEFkZEF2YXRhckZvcm1cclxuKTtcclxuYWRkQXZhdGFyTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmZ1bmN0aW9uIHN1Ym1pdEFkZEF2YXRhckZvcm0oZGF0YSkge1xyXG4gIGFkZEF2YXRhck1vZGFsLnJlbmRlckxvYWRpbmcodHJ1ZSk7XHJcbiBhcGkuc2V0VXNlckF2YXRhcihkYXRhLmxpbmspXHJcbiAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgdXNlckluZm8uc2V0VXNlckF2YXRhcih7IGF2YXRhckltYWdlSW5wdXQ6IGRhdGEuYXZhdGFyIH0pO1xyXG4gICAgIGFkZEF2YXRhck1vZGFsLmNsb3NlKCk7XHJcbiAgIH0pXHJcbiAgIC5jYXRjaChjb25zb2xlLmxvZylcclxuICAgLmZpbmFsbHkoKCkgPT4gYWRkQXZhdGFyTW9kYWwucmVuZGVyTG9hZGluZyhmYWxzZSkpOyBcclxufVxyXG5cclxuLy9cclxuY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgZWRpdFByb2ZpbGVGb3JtKTtcclxuY29uc3QgYWRkQ2FyZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgYWRkQ2FyZEZvcm0pO1xyXG5jb25zdCBhZGRBdmF0YXJGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIGFkZEF2YXRhckZvcm0pO1xyXG5cclxuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5hZGRDYXJkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmFkZEF2YXRhckZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuZnVuY3Rpb24gZmlsbFByb2ZpbGVGb3JtUHJldmlvdXNJbnB1dCgpIHtcclxuICBjb25zdCB7IG5hbWUsIGpvYiB9ID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICBwcm9maWxlTmFtZUlucHV0LnZhbHVlID0gbmFtZTtcclxuICBwcm9maWxlSm9iSW5wdXQudmFsdWUgPSBqb2I7XHJcbn1cclxuXHJcbmVkaXRQcm9maWxlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgZmlsbFByb2ZpbGVGb3JtUHJldmlvdXNJbnB1dCgpO1xyXG4gIGVkaXRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGVkaXRNb2RhbC5vcGVuKCk7XHJcbn0pO1xyXG5cclxuYWRkQ2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGFkZENhcmRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGFkZENhcmRNb2RhbC5vcGVuKCk7XHJcbn0pO1xyXG5cclxuYWRkQXZhdGFyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgYWRkQXZhdGFyRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxuICBhZGRBdmF0YXJNb2RhbC5vcGVuKCk7XHJcbn0pO1xyXG4iLCJleHBvcnQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHsgcHJvZmlsZU5hbWVTZWxlY3RvciwgcHJvZmlsZUpvYlNlbGVjdG9yLCBhdmF0YXJTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9wcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZmlsZU5hbWVTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9wcm9maWxlSm9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlSm9iU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fYXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhdmF0YXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5hbWU6IHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50LFxyXG4gICAgICBqb2I6IHRoaXMuX3Byb2ZpbGVKb2IudGV4dENvbnRlbnQsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oeyBwcm9maWxlTmFtZUlucHV0LCBwcm9maWxlSm9iSW5wdXQgfSkge1xyXG4gICAgdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBwcm9maWxlTmFtZUlucHV0O1xyXG4gICAgdGhpcy5fcHJvZmlsZUpvYi50ZXh0Q29udGVudCA9IHByb2ZpbGVKb2JJbnB1dDtcclxuICB9XHJcblxyXG4gIHNldFVzZXJBdmF0YXIoeyBhdmF0YXJJbWFnZUlucHV0IH0pIHtcclxuICAgIHRoaXMuX2F2YXRhci5zcmMgPSBhdmF0YXJJbWFnZUlucHV0O1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG5cclxuICAgIHRoaXMuX2ltYWdlQ2FyZE1vZGFsID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9pbWFnZUNhcmRDYXB0aW9uTW9kYWwgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jYXB0aW9uXCIpO1xyXG4gIH1cclxuXHJcbiAgb3BlbiA9IChkYXRhKSA9PiB7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcclxuXHJcbiAgICB0aGlzLl9pbWFnZUNhcmRDYXB0aW9uTW9kYWwudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5faW1hZ2VDYXJkTW9kYWwuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2ltYWdlQ2FyZE1vZGFsLmFsdCA9IGBMYW5kc2NhcGUgaW1hZ2UgZnJvbSBhIHBsYWNlIG5hbWVkICR7dGhpcy5fbmFtZX1gO1xyXG4gIH07XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhTdWJtaXQgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgc2V0QWN0aW9uKGFjdGlvbikge1xyXG4gICAgdGhpcy5fc3VibWl0SGFuZGxlciA9IGFjdGlvbjtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRIYW5kbGVyKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwidGVtcGxhdGVDYXJkU2VsZWN0b3IiLCJ1c2VySWQiLCJkYXRhIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlTGlrZUljb24iLCJoYW5kbGVEZWxldGVJY29uIiwidGhpcyIsIl9saXN0SXRlbSIsIl9nZXRUZW1wbGF0ZSIsIl90aXRsZSIsInF1ZXJ5U2VsZWN0b3IiLCJfaW1hZ2UiLCJfbGlrZXNDb3VudCIsInRleHRDb250ZW50IiwiX2xpa2VzIiwibGVuZ3RoIiwiX25hbWUiLCJzcmMiLCJfbGluayIsImFsdCIsIl9hZGRFdmVudExpc3RlbmVycyIsIl9vd25lcklkIiwiX3VzZXJJZCIsIl9kZWxldGVCdXR0b24iLCJzdHlsZSIsImRpc3BsYXkiLCJpc0xpa2VkIiwibGlrZUNhcmQiLCJuYW1lIiwibGluayIsImxpa2VzIiwiX3RlbXBsYXRlQ2FyZFNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsIl9oYW5kbGVEZWxldGVJY29uIiwiX2hhbmRsZUxpa2VJY29uIiwiX2lkIiwib3duZXIiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJzb21lIiwicHJlc29uIiwicmVtb3ZlQ2FyZCIsInJlbW92ZSIsIm5ld0xpa2VzIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiX2xpa2VCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwic2V0dGluZ3MiLCJmb3JtIiwiX2lucHV0cyIsImV2ZXJ5IiwiaW5wdXQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9zZXR0aW5ncyIsIl9pc0Zvcm1WYWxpZCIsIl9lbmFibGVTdWJtaXRCdXR0b24iLCJfYnV0dG9uIiwiX2Rpc2FibGVTdWJtaXRCdXR0b24iLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfZm9ybSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiX2NoZWNrVmFsaWRpdHkiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfc2hvd0Vycm9yIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsImVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJpZCIsImFkZCIsIl9oaWRlRXJyb3IiLCJidXR0b24iLCJkaXNhYmxlZCIsInJlc2V0VmFsaWRhdGlvbiIsImVuYWJsZVZhbGlkYXRpb24iLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsIl9zZXRFdmVudExpc3RlbmVycyIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsImtleSIsImNsb3NlIiwidGFyZ2V0IiwiY29udGFpbnMiLCJfcG9wdXAiLCJiaW5kIiwib3BlbiIsIl9oYW5kbGVFc2NDbG9zZSIsIl9oYW5kbGVPdmVybGF5Q2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJQb3B1cFdpdGhGb3JtIiwicG9wdXAiLCJzdWJtaXRIYW5kbGVyIiwic3VwZXIiLCJfc3VibWl0SGFuZGxlciIsIl9zdWJtaXRCdXR0b24iLCJfc3VibWl0QnV0dG9uVGV4dCIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0VmFsdWVzIiwidmFsdWUiLCJyZW5kZXJMb2FkaW5nIiwiaXNMb2FkaW5nIiwicmVzZXQiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiZWxlbWVudCIsIl9lbGVtZW50IiwiYWRkSXRlbSIsInByZXBlbmQiLCJhcGkiLCJiYXNlVXJsIiwiaGVhZGVycyIsInVybCIsImZldGNoIiwidGhlbiIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXNUZXh0IiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsImdldEluaXRpYWxDYXJkcyIsIl9jdXN0b21GZXRjaCIsImdldFVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJhYm91dCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiY3JlYXRlQ2FyZCIsImRlbGV0ZUNhcmQiLCJjYXJkSWQiLCJkaXNsaWtlQ2FyZCIsInNldFVzZXJBdmF0YXIiLCJhdmF0YXIiLCJhdXRob3JpemF0aW9uIiwiZWRpdFByb2ZpbGVNb2RhbCIsImFkZE5ld0NhcmRNb2RhbCIsImFkZE5ld0F2YXRhck1vZGFsIiwiZWRpdFByb2ZpbGVGb3JtIiwiYWRkQ2FyZEZvcm0iLCJhZGRBdmF0YXJGb3JtIiwicHJvZmlsZU5hbWVJbnB1dCIsInByb2ZpbGVKb2JJbnB1dCIsImVkaXRQcm9maWxlQnV0dG9uIiwiYWRkQ2FyZEJ1dHRvbiIsImFkZEF2YXRhckJ1dHRvbiIsInByb2ZpbGVBdmF0YXIiLCJwcm9maWxlQXZhdGFyQ29udGFpbmVyIiwic2VjdGlvbiIsInVzZXJJbmZvIiwicHJvZmlsZU5hbWVTZWxlY3RvciIsInByb2ZpbGVKb2JTZWxlY3RvciIsImF2YXRhclNlbGVjdG9yIiwiX3Byb2ZpbGVOYW1lIiwiX3Byb2ZpbGVKb2IiLCJfYXZhdGFyIiwiam9iIiwiYXZhdGFySW1hZ2VJbnB1dCIsImFsbCIsImNhcmREYXRhIiwidXNlckRhdGEiLCJjYXRjaCIsImNvbnNvbGUiLCJsb2ciLCJwcmV2aWV3SW1hZ2VNb2RhbCIsIl9pbWFnZUNhcmRDYXB0aW9uTW9kYWwiLCJfaW1hZ2VDYXJkTW9kYWwiLCJjb25maXJtTW9kYWwiLCJzZXRBY3Rpb24iLCJhY3Rpb24iLCJjYXJkIiwiZ2VuZXJhdGVDYXJkIiwiZWRpdE1vZGFsIiwiZmluYWxseSIsImFkZENhcmRNb2RhbCIsImFkZEF2YXRhck1vZGFsIiwiZWRpdEZvcm1WYWxpZGF0b3IiLCJGb3JtVmFsaWRhdG9yIiwiYWRkQ2FyZEZvcm1WYWxpZGF0b3IiLCJhZGRBdmF0YXJGb3JtVmFsaWRhdG9yIiwiZmlsbFByb2ZpbGVGb3JtUHJldmlvdXNJbnB1dCJdLCJzb3VyY2VSb290IjoiIn0=