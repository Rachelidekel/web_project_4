!function(){"use strict";class e{constructor(e,t,s){let{data:i,handleCardClick:r,handleLikeIcon:n,handleDeleteIcon:o}=e;var a,l;l=()=>(this._listItem=this._getTemplate(),this._title=this._listItem.querySelector(".element__title-name"),this._image=this._listItem.querySelector(".element__item"),this._title.textContent=this._name,this._image.src=this._link,this._image.alt="Landscape image from a place named ".concat(this._name),this._addEventListeners(),this._ownerId!==this._userId&&(this._deleteButton.style.display="none"),this._listItem.querySelector(".element__likes-count").textContent=this._likes.length,this.isLiked()&&this.likeCard(this._likes),this._listItem),(a="generateCard")in this?Object.defineProperty(this,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):this[a]=l,this._name=i.name,this._link=i.link,this._likes=i.likes,this._templateCardSelector=t,this._handleCardClick=r,this._handleDeleteIcon=o,this._handleLikeIcon=n,this._id=i._id,this._userId=s,this._ownerId=i.owner._id}_getTemplate(){return document.querySelector(this._templateCardSelector).content.querySelector(".element").cloneNode(!0)}isLiked(){return this._likes.some((e=>e._id===this._userId))}removeCard(){this._listItem.remove(),this._listItem=null}likeCard(e){this._likes=e,this._listItem.querySelector(".element__likes-count").textContent=this._likes.length,this._listItem.querySelector(".element__title-button").classList.toggle("element__title-button_active")}_addEventListeners(){this._likeButton=this._listItem.querySelector(".element__title-button"),this._deleteButton=this._listItem.querySelector(".element__delete-button"),this._likeButton.addEventListener("click",(()=>{this._handleLikeIcon(this._id)})),this._deleteButton.addEventListener("click",(()=>{this._handleDeleteIcon(this._id)})),this._image.addEventListener("click",(()=>{this._handleCardClick(this._name,this._link)}))}}function t(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var s=class{constructor(e,s){t(this,"_isFormValid",(()=>this._inputs.every((e=>!0===e.validity.valid)))),t(this,"_toggleButtonState",(()=>{const{inactiveButtonClass:e}=this._settings;this._isFormValid()?this._enableSubmitButton(this._button,e):this._disableSubmitButton(this._button,e)})),t(this,"_setEventListeners",(()=>{const{inputSelector:e,submitButtonSelector:t}=this._settings;this._inputs=[...this._form.querySelectorAll(e)],this._button=this._form.querySelector(t),this._inputs.forEach((e=>{e.addEventListener("input",(()=>{this._checkValidity(e,this._settings),this._toggleButtonState()}))}))})),this._settings=e,this._form=s}_showError(e){const{inputErrorClass:t,errorClass:s}=this._settings,i=e.validationMessage,r=this._form.querySelector("#".concat(e.id,"-error"));r.textContent=i,r.classList.add(s),e.classList.add(t)}_hideError(e){const{inputErrorClass:t,errorClass:s}=this._settings,i=this._form.querySelector("#".concat(e.id,"-error"));i.textContent="",i.classList.remove(s),e.classList.remove(t)}_checkValidity(e){e.validity.valid?this._hideError(e):this._showError(e)}_disableSubmitButton(e){const{inactiveButtonClass:t}=this._settings;e.disabled=!0,e.classList.add(t)}_enableSubmitButton(e){const{inactiveButtonClass:t}=this._settings;e.disabled=!1,e.classList.remove(t)}resetValidation(){this._inputs.forEach((e=>{this._hideError(e)})),this._toggleButtonState()}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}};function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class r{constructor(e){i(this,"_handleEscClose",(e=>{"Escape"===e.key&&this.close()})),i(this,"_handleOverlayClose",(e=>{(e.target.classList.contains("popup")||e.target.classList.contains("popup__close-button"))&&this.close()})),this._popup=document.querySelector(e),this.close.bind(this)}open(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose),document.addEventListener("mousedown",this._handleOverlayClose)}close(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose),document.removeEventListener("mousedown",this._handleOverlayClose)}setEventListeners(){this._popup.querySelector(".popup__close-icon").addEventListener("click",(()=>{this.close()}))}}class n extends r{constructor(e,t){super(e),this._submitHandler=t,this._form=this._popup.querySelector(".popup__form"),this._inputs=[...this._form.querySelectorAll(".form__input")]}_getInputValues(){const e={};return this._inputs.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._submitHandler(this._getInputValues()),this.close()}))}close(){super.close(),this._form.reset()}}class o{constructor(e,t){let{items:s,renderer:i}=e;this._items=s,this._renderer=i,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._element=this._renderer(e)}))}addItem(e){this._container.prepend(e)}}const a=(e,t)=>fetch(e,t).then((e=>e.ok?e.json():Promise.reject(e.statusText))).catch(console.log);function l(e,t){e.textContent=t}const c=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}getInitialCards(){return a("".concat(this._baseUrl,"/cards"),{headers:this._headers})}getUserInfo(){return a("".concat(this._baseUrl,"/users/me"),{headers:this._headers})}setUserInfo(e,t){return a("".concat(this._baseUrl,"/users/me"),{headers:this._headers,method:"PATCH",body:JSON.stringify({name:e,about:t})})}createCard(e){return a("".concat(this._baseUrl,"/cards"),{headers:this._headers,method:"POST",body:JSON.stringify(e)})}deleteCard(e){return a("".concat(this._baseUrl,"/cards/").concat(e),{headers:this._headers,method:"DELETE"})}likeCard(e){return a("".concat(this._baseUrl,"/cards/likes/").concat(e),{headers:this._headers,method:"PUT"})}dislikeCard(e){return a("".concat(this._baseUrl,"/cards/likes/").concat(e),{headers:this._headers,method:"DELETE"})}setUserAvatar(e){return a("".concat(this._baseUrl,"/users/me/avatar"),{headers:this._headers,method:"PATCH",body:JSON.stringify({avatar:e})})}}({baseUrl:"https://around.nomoreparties.co/v1/group-1",headers:{authorization:"a0dd5829-1b51-4f9b-93c7-6d4f8e85cb31","Content-Type":"application/json"}}),_=document.querySelector(".popup_type_edit"),d=document.querySelector(".popup_type_add-card"),u=document.querySelector(".popup_type_avatar"),h=_.querySelector(".popup__form"),p=d.querySelector(".popup__form"),m=u.querySelector(".popup__form"),v=document.querySelector(".form__input_type_name"),b=document.querySelector(".form__input_type_job"),f=document.querySelector(".profile__open-button"),y=document.querySelector(".profile__add-button"),C=document.querySelector(".profile__avatar-overlay"),S=document.querySelector(".profile__image"),g=document.querySelector(".profile__avatar"),I={inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_disabled",inputErrorClass:"form__input_type_error",errorClass:"popup__error_visible"},k=h.querySelector(I.submitButtonSelector),L=p.querySelector(I.submitButtonSelector),E=m.querySelector(I.submitButtonSelector);let q,U;const w=new class{constructor(e){let{profileNameSelector:t,profileJobSelector:s}=e;this._profileName=document.querySelector(t),this._profileJob=document.querySelector(s),this._avatar=document.querySelector(".profile__image")}getUserInfo(){return{name:this._profileName.textContent,job:this._profileJob.textContent}}setUserInfo(e){let{profileNameInput:t,profileJobInput:s}=e;this._profileName.textContent=t,this._profileJob.textContent=s}setUserAvatar(e){let{avatarImageInput:t}=e;this._avatar.src=t}}({profileNameSelector:".profile__title-name",profileJobSelector:".profile__subtitle-job",avatarImageInput:".profile__image"});S.alt="user profile avatar",S.classList.add("profile__image"),Promise.all([c.getInitialCards(),c.getUserInfo()]).then((e=>{let[t,s]=e;U=new o({items:t,renderer:e=>U.addItem(V(e))},".elements__list"),q=s._id,U.renderItems(),w.setUserInfo({profileNameInput:s.name,profileJobInput:s.about}),g.prepend(S),w.setUserAvatar({avatarImageInput:s.avatar})}));const B=new class extends r{constructor(e){var t,s;super(e),s=e=>{super.open(),this._name=e.name,this._link=e.link,this._imageCardCaptionModal.textContent=this._name,this._imageCardModal.src=this._link,this._imageCardModal.alt="Landscape image from a place named ".concat(this._name)},(t="open")in this?Object.defineProperty(this,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):this.open=s,this._imageCardModal=this._popup.querySelector(".popup__image"),this._imageCardCaptionModal=this._popup.querySelector(".popup__caption")}}(".popup_type_image");B.setEventListeners();const x=new class extends r{setAction(e){this._submitHandler=e}setEventListeners(){this._popup.addEventListener("submit",(e=>{e.preventDefault(),this._submitHandler(),this.close()})),super.setEventListeners()}}(".popup_type_delete-card");function V(t){const s=new e({data:t,handleCardClick:()=>{B.open(t)},handleLikeIcon:e=>{s.isLiked()?c.dislikeCard(e).then((e=>{s.likeCard(e.likes)})):c.likeCard(e).then((e=>{s.likeCard(e.likes)}))},handleDeleteIcon:e=>{x.open(),x.setAction((()=>{c.deleteCard(e).then((e=>{s.removeCard(),x.close()}))}))}},".element__template",q);return s.generateCard()}x.setEventListeners();const j=new n(".popup_type_edit",(function(e){l(k,"Saving..."),c.setUserInfo(e.name,e.job).then((e=>{l(k,"Save"),w.setUserInfo({profileNameInput:e.name,profileJobInput:e.about}),j.close()}))}));j.setEventListeners();const N=new n(".popup_type_add-card",(function(e){l(L,"Creating..."),c.createCard(e).then((e=>{V(e),l(L,"Create"),U.addItem(V(e)),N.close()}))}));N.setEventListeners();const A=new n(".popup_type_avatar",(function(e){l(E,"Saving..."),c.setUserAvatar(e.link).then((e=>{w.setUserAvatar({avatarImageInput:e.avatar}),l(E,"Save"),A.close()}))}));A.setEventListeners();const J=new s(I,h),O=new s(I,p),P=new s(I,m);J.enableValidation(),O.enableValidation(),P.enableValidation(),f.addEventListener("click",(()=>{!function(){const{name:e,job:t}=w.getUserInfo();v.value=e,b.value=t}(),J.resetValidation(),j.open()})),y.addEventListener("click",(()=>{O.resetValidation(),N.open()})),C.addEventListener("click",(()=>{P.resetValidation(),A.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q2pDd0ssRUFBU3BCLGNBQWMsQ0FBRTJCLGlCQUFrQi9LLEVBQUtxSixTQUNoRG5CLEVBQVVvQyxFQUFvQixRQUM5QnVCLEVBQWV4RyxjQVBuQndHLEVBQWUvRixvQkFZZixNQUFNZ0csRUFBb0IsSUFBSUMsRUFBY2pKLEVBQVU0RyxHQUNoRHNDLEVBQXVCLElBQUlELEVBQWNqSixFQUFVNkcsR0FDbkRzQyxFQUF5QixJQUFJRixFQUFjakosRUFBVThHLEdBRTNEa0MsRUFBa0JoSCxtQkFDbEJrSCxFQUFxQmxILG1CQUNyQm1ILEVBQXVCbkgsbUJBUXZCaUYsRUFBa0JsSCxpQkFBaUIsU0FBUyxNQU41QyxXQUNFLE1BQU0sS0FBRXBCLEVBQUYsSUFBUXFKLEdBQVFOLEVBQVMvQixjQUMvQm9CLEVBQWlCdkQsTUFBUTdFLEVBQ3pCcUksRUFBZ0J4RCxNQUFRd0UsRUFJeEJvQixHQUNBSixFQUFrQmpILGtCQUNsQjhHLEVBQVVqRyxVQUdac0UsRUFBY25ILGlCQUFpQixTQUFTLEtBQ3RDbUosRUFBcUJuSCxrQkFDckIrRyxFQUFhbEcsVUFHZnVFLEVBQWdCcEgsaUJBQWlCLFNBQVMsS0FDeENvSixFQUF1QnBILGtCQUN2QmdILEVBQWVuRyxVIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtX3dlYl9wcm9qZWN0XzgvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bV93ZWJfcHJvamVjdF84Ly4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW1fd2ViX3Byb2plY3RfOC8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bV93ZWJfcHJvamVjdF84Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW1fd2ViX3Byb2plY3RfOC8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtX3dlYl9wcm9qZWN0XzgvLi9zcmMvdXRpbHMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtX3dlYl9wcm9qZWN0XzgvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtX3dlYl9wcm9qZWN0XzgvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bV93ZWJfcHJvamVjdF84Ly4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bV93ZWJfcHJvamVjdF84Ly4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtX3dlYl9wcm9qZWN0XzgvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW1fd2ViX3Byb2plY3RfOC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aFN1Ym1pdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICB7IGRhdGEsIGhhbmRsZUNhcmRDbGljaywgaGFuZGxlTGlrZUljb24sIGhhbmRsZURlbGV0ZUljb24gfSxcclxuICAgIHRlbXBsYXRlQ2FyZFNlbGVjdG9yLFxyXG4gICAgdXNlcklkXHJcbiAgKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcztcclxuICAgIHRoaXMuX3RlbXBsYXRlQ2FyZFNlbGVjdG9yID0gdGVtcGxhdGVDYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XHJcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVJY29uID0gaGFuZGxlRGVsZXRlSWNvbjtcclxuICAgIHRoaXMuX2hhbmRsZUxpa2VJY29uID0gaGFuZGxlTGlrZUljb247XHJcbiAgICB0aGlzLl9pZCA9IGRhdGEuX2lkO1xyXG4gICAgdGhpcy5fdXNlcklkID0gdXNlcklkO1xyXG4gICAgdGhpcy5fb3duZXJJZCA9IGRhdGEub3duZXIuX2lkO1xyXG4gIH1cclxuXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgY29uc3QgdGVtcGxhdGVMaXN0SXRlbSA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlQ2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgICByZXR1cm4gdGVtcGxhdGVMaXN0SXRlbTtcclxuICB9XHJcblxyXG4gIGlzTGlrZWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fbGlrZXMuc29tZSgocHJlc29uKSA9PiBwcmVzb24uX2lkID09PSB0aGlzLl91c2VySWQpO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2xpc3RJdGVtLnJlbW92ZSgpO1xyXG4gICAgdGhpcy5fbGlzdEl0ZW0gPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgbGlrZUNhcmQobmV3TGlrZXMpIHtcclxuICAgIHRoaXMuX2xpa2VzID0gbmV3TGlrZXM7XHJcbiAgICB0aGlzLl9saXN0SXRlbS5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2xpa2VzLWNvdW50XCIpLnRleHRDb250ZW50ID1cclxuICAgICAgdGhpcy5fbGlrZXMubGVuZ3RoO1xyXG5cclxuICAgIHRoaXMuX2xpc3RJdGVtXHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX3RpdGxlLWJ1dHRvblwiKVxyXG4gICAgICAuY2xhc3NMaXN0LnRvZ2dsZShcImVsZW1lbnRfX3RpdGxlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgfVxyXG5cclxuICBfYWRkRXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fbGlzdEl0ZW0ucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X190aXRsZS1idXR0b25cIik7XHJcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9saXN0SXRlbS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5lbGVtZW50X19kZWxldGUtYnV0dG9uXCJcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVMaWtlSWNvbih0aGlzLl9pZCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVJY29uKHRoaXMuX2lkKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5faW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX25hbWUsIHRoaXMuX2xpbmspO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZW5lcmF0ZUNhcmQgPSAoKSA9PiB7XHJcbiAgICB0aGlzLl9saXN0SXRlbSA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICB0aGlzLl90aXRsZSA9IHRoaXMuX2xpc3RJdGVtLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fdGl0bGUtbmFtZVwiKTtcclxuICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fbGlzdEl0ZW0ucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19pdGVtXCIpO1xyXG4gICAgdGhpcy5fdGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5faW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2ltYWdlLmFsdCA9IGBMYW5kc2NhcGUgaW1hZ2UgZnJvbSBhIHBsYWNlIG5hbWVkICR7dGhpcy5fbmFtZX1gO1xyXG5cclxuICAgIHRoaXMuX2FkZEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgaWYgKHRoaXMuX293bmVySWQgIT09IHRoaXMuX3VzZXJJZCkge1xyXG4gICAgICB0aGlzLl9kZWxldGVCdXR0b24uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX2xpc3RJdGVtLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fbGlrZXMtY291bnRcIikudGV4dENvbnRlbnQgPVxyXG4gICAgICB0aGlzLl9saWtlcy5sZW5ndGg7XHJcblxyXG4gICAgaWYgKHRoaXMuaXNMaWtlZCgpKSB7XHJcbiAgICAgIHRoaXMubGlrZUNhcmQodGhpcy5fbGlrZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0aGlzLl9saXN0SXRlbTtcclxuICB9O1xyXG59XHJcbiIsImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtKSB7XHJcbiAgICB0aGlzLl9zZXR0aW5ncyA9IHNldHRpbmdzO1xyXG4gICAgdGhpcy5fZm9ybSA9IGZvcm07XHJcbiAgfVxyXG5cclxuICBfc2hvd0Vycm9yKGlucHV0KSB7XHJcbiAgICBjb25zdCB7IGlucHV0RXJyb3JDbGFzcywgZXJyb3JDbGFzcyB9ID0gdGhpcy5fc2V0dGluZ3M7XHJcbiAgICBjb25zdCBlcnJvciA9IGlucHV0LnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dC5pZH0tZXJyb3JgKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yO1xyXG5cclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKGVycm9yQ2xhc3MpO1xyXG4gICAgaW5wdXQuY2xhc3NMaXN0LmFkZChpbnB1dEVycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVFcnJvcihpbnB1dCkge1xyXG4gICAgY29uc3QgeyBpbnB1dEVycm9yQ2xhc3MsIGVycm9yQ2xhc3MgfSA9IHRoaXMuX3NldHRpbmdzO1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dC5pZH0tZXJyb3JgKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcblxyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoZXJyb3JDbGFzcyk7XHJcbiAgICBpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKGlucHV0RXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tWYWxpZGl0eShpbnB1dCkge1xyXG4gICAgaWYgKGlucHV0LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX2hpZGVFcnJvcihpbnB1dCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zaG93RXJyb3IoaW5wdXQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2Rpc2FibGVTdWJtaXRCdXR0b24oYnV0dG9uKSB7XHJcbiAgICBjb25zdCB7IGluYWN0aXZlQnV0dG9uQ2xhc3MgfSA9IHRoaXMuX3NldHRpbmdzO1xyXG4gICAgYnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKGluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gIH1cclxuICBfZW5hYmxlU3VibWl0QnV0dG9uKGJ1dHRvbikge1xyXG4gICAgY29uc3QgeyBpbmFjdGl2ZUJ1dHRvbkNsYXNzIH0gPSB0aGlzLl9zZXR0aW5ncztcclxuICAgIGJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaXNGb3JtVmFsaWQgPSAoKSA9PlxyXG4gICAgdGhpcy5faW5wdXRzLmV2ZXJ5KChpbnB1dCkgPT4gaW5wdXQudmFsaWRpdHkudmFsaWQgPT09IHRydWUpO1xyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUgPSAoKSA9PiB7XHJcbiAgICBjb25zdCB7IGluYWN0aXZlQnV0dG9uQ2xhc3MgfSA9IHRoaXMuX3NldHRpbmdzO1xyXG5cclxuICAgIGlmICh0aGlzLl9pc0Zvcm1WYWxpZCgpKSB7XHJcbiAgICAgIHRoaXMuX2VuYWJsZVN1Ym1pdEJ1dHRvbih0aGlzLl9idXR0b24sIGluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fZGlzYWJsZVN1Ym1pdEJ1dHRvbih0aGlzLl9idXR0b24sIGluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycyA9ICgpID0+IHtcclxuICAgIGNvbnN0IHsgaW5wdXRTZWxlY3Rvciwgc3VibWl0QnV0dG9uU2VsZWN0b3IgfSA9IHRoaXMuX3NldHRpbmdzO1xyXG4gICAgdGhpcy5faW5wdXRzID0gWy4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbChpbnB1dFNlbGVjdG9yKV07XHJcbiAgICB0aGlzLl9idXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3Ioc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG5cclxuICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrVmFsaWRpdHkoaW5wdXQsIHRoaXMuX3NldHRpbmdzKTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlRXJyb3IoaW5wdXQpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuY2xvc2UuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChldnQpID0+IHtcclxuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBfaGFuZGxlT3ZlcmxheUNsb3NlID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKFxyXG4gICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwXCIpIHx8XHJcbiAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBfX2Nsb3NlLWJ1dHRvblwiKVxyXG4gICAgKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5faGFuZGxlT3ZlcmxheUNsb3NlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5faGFuZGxlT3ZlcmxheUNsb3NlKTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgY29uc3QgY2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jbG9zZS1pY29uXCIpO1xyXG4gICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXAsIHN1Ym1pdEhhbmRsZXIpIHtcclxuICAgIHN1cGVyKHBvcHVwKTtcclxuICAgIHRoaXMuX3N1Ym1pdEhhbmRsZXIgPSBzdWJtaXRIYW5kbGVyO1xyXG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9pbnB1dHMgPSBbLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm1fX2lucHV0XCIpXTtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IGlucHV0VmFsdWVzID0ge307XHJcblxyXG4gICAgdGhpcy5faW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBpbnB1dFZhbHVlcztcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRIYW5kbGVyKHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuXHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xyXG4gICAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fcmVuZGVyZXIoZWxlbWVudCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG59XHJcblxyXG4iLCJleHBvcnQgY29uc3QgY3VzdG9tRmV0Y2ggPSAodXJsLCBoZWFkZXJzKSA9PlxyXG4gIGZldGNoKHVybCwgaGVhZGVycylcclxuICAgIC50aGVuKChyZXMpID0+IChyZXMub2sgPyByZXMuanNvbigpIDogUHJvbWlzZS5yZWplY3QocmVzLnN0YXR1c1RleHQpKSlcclxuICAgIC5jYXRjaChjb25zb2xlLmxvZyk7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaW1wcm92ZVVYKGVsZW1lbnQsIHRleHQpIHtcclxuICBlbGVtZW50LnRleHRDb250ZW50ID0gdGV4dDtcclxufVxyXG4iLCJpbXBvcnQgeyBjdXN0b21GZXRjaCB9IGZyb20gXCIuLi91dGlscy91dGlscy5qc1wiO1xyXG5cclxuY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGhlYWRlcnMgfSkge1xyXG4gICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XHJcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcclxuICB9XHJcblxyXG4gIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIHJldHVybiBjdXN0b21GZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4gY3VzdG9tRmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKG5hbWUsIGFib3V0KSB7XHJcbiAgICByZXR1cm4gY3VzdG9tRmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICBhYm91dDogYWJvdXQsXHJcbiAgICAgIH0pLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjcmVhdGVDYXJkKGRhdGEpIHtcclxuICAgIHJldHVybiBjdXN0b21GZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gY3VzdG9tRmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGxpa2VDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGN1c3RvbUZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBkaXNsaWtlQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiBjdXN0b21GZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckF2YXRhcihhdmF0YXIpIHtcclxuICAgIHJldHVybiBjdXN0b21GZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGF2YXRhciB9KSxcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xXCIsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogXCJhMGRkNTgyOS0xYjUxLTRmOWItOTNjNy02ZDRmOGU4NWNiMzFcIixcclxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gIH0sXHJcbn0pO1xyXG4iLCIvL21vZGFsc1xyXG5jb25zdCBlZGl0UHJvZmlsZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX2VkaXRcIik7XHJcbmNvbnN0IGFkZE5ld0NhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdHlwZV9hZGQtY2FyZFwiKTtcclxuY29uc3QgYWRkTmV3QXZhdGFyTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3R5cGVfYXZhdGFyXCIpXHJcblxyXG4vL1xyXG5leHBvcnQgY29uc3QgdGVtcGxhdGVDYXJkU2VsZWN0b3IgPSBcIi5lbGVtZW50X190ZW1wbGF0ZVwiO1xyXG5cclxuLy9mb3Jtc1xyXG5leHBvcnQgY29uc3QgZWRpdFByb2ZpbGVGb3JtID0gZWRpdFByb2ZpbGVNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xyXG5leHBvcnQgY29uc3QgYWRkQ2FyZEZvcm0gPSBhZGROZXdDYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcclxuZXhwb3J0IGNvbnN0IGFkZEF2YXRhckZvcm0gPSBhZGROZXdBdmF0YXJNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xyXG5cclxuLy9pbnB1dHNcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVOYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLmZvcm1fX2lucHV0X3R5cGVfbmFtZVwiXHJcbik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlSm9iSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2lucHV0X3R5cGVfam9iXCIpO1xyXG5cclxuXHJcbi8vb3BlbiBtb2RhbCBidXR0b25zXHJcbmV4cG9ydCBjb25zdCBlZGl0UHJvZmlsZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIucHJvZmlsZV9fb3Blbi1idXR0b25cIlxyXG4pO1xyXG5leHBvcnQgY29uc3QgYWRkQ2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IGFkZEF2YXRhckJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyLW92ZXJsYXlcIilcclxuXHJcbmV4cG9ydCBjb25zdCBwcm9maWxlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19pbWFnZVwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVBdmF0YXJDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLnByb2ZpbGVfX2F2YXRhclwiXHJcbik7XHJcblxyXG4vL3NldHRpbmdzXHJcbmV4cG9ydCBjb25zdCBzZXR0aW5ncyA9IHtcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5mb3JtX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5mb3JtX19idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcImZvcm1fX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJmb3JtX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJwb3B1cF9fZXJyb3JfdmlzaWJsZVwiLFxyXG59O1xyXG5cclxuLy9zdWJtaXQgYnV0dG9uc1xyXG5leHBvcnQgY29uc3QgZWRpdFByb2ZpbGVTdWJtaXRCdXR0b24gPSBlZGl0UHJvZmlsZUZvcm0ucXVlcnlTZWxlY3RvcihcclxuICBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcilcclxuZXhwb3J0IGNvbnN0IGFkZENhcmRTdWJtaXRCdXR0b24gPSBhZGRDYXJkRm9ybS5xdWVyeVNlbGVjdG9yKFxyXG4gIHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKVxyXG5leHBvcnQgY29uc3QgYXZhdGFyU3VibWl0QnV0dG9uID0gYWRkQXZhdGFyRm9ybS5xdWVyeVNlbGVjdG9yKFxyXG4gIHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKVxyXG5cclxuXHJcblxyXG5cclxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IHsgQ2FyZCB9IGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgeyBQb3B1cFdpdGhGb3JtIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aFN1Ym1pdCBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhTdWJtaXQuanNcIjtcclxuaW1wb3J0IHsgU2VjdGlvbiB9IGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IHsgVXNlckluZm8gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgeyBhcGkgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcclxuaW1wb3J0IHsgaW1wcm92ZVVYIH0gZnJvbSBcIi4uL3V0aWxzL3V0aWxzLmpzXCI7XHJcbmltcG9ydCB7XHJcbiAgdGVtcGxhdGVDYXJkU2VsZWN0b3IsXHJcbiAgZWRpdFByb2ZpbGVGb3JtLFxyXG4gIGFkZENhcmRGb3JtLFxyXG4gIGFkZEF2YXRhckZvcm0sXHJcbiAgcHJvZmlsZU5hbWVJbnB1dCxcclxuICBwcm9maWxlSm9iSW5wdXQsXHJcbiAgZWRpdFByb2ZpbGVCdXR0b24sXHJcbiAgYWRkQ2FyZEJ1dHRvbixcclxuICBwcm9maWxlQXZhdGFyLFxyXG4gIHByb2ZpbGVBdmF0YXJDb250YWluZXIsXHJcbiAgc2V0dGluZ3MsXHJcbiAgYWRkQXZhdGFyQnV0dG9uLFxyXG4gIGVkaXRQcm9maWxlU3VibWl0QnV0dG9uLFxyXG4gIGFkZENhcmRTdWJtaXRCdXR0b24sXHJcbiAgYXZhdGFyU3VibWl0QnV0dG9uLFxyXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuXHJcbmxldCB1c2VySWQ7XHJcbmxldCBzZWN0aW9uO1xyXG5cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gIHByb2ZpbGVOYW1lU2VsZWN0b3I6IFwiLnByb2ZpbGVfX3RpdGxlLW5hbWVcIixcclxuICBwcm9maWxlSm9iU2VsZWN0b3I6IFwiLnByb2ZpbGVfX3N1YnRpdGxlLWpvYlwiLFxyXG4gIGF2YXRhckltYWdlSW5wdXQ6IFwiLnByb2ZpbGVfX2ltYWdlXCIsXHJcbn0pO1xyXG5cclxuLy9cclxucHJvZmlsZUF2YXRhci5hbHQgPSBcInVzZXIgcHJvZmlsZSBhdmF0YXJcIjtcclxucHJvZmlsZUF2YXRhci5jbGFzc0xpc3QuYWRkKFwicHJvZmlsZV9faW1hZ2VcIik7XHJcblxyXG5Qcm9taXNlLmFsbChbYXBpLmdldEluaXRpYWxDYXJkcygpLCBhcGkuZ2V0VXNlckluZm8oKV0pLnRoZW4oXHJcbiAgKFtjYXJkRGF0YSwgdXNlckRhdGFdKSA9PiB7XHJcbiAgICBzZWN0aW9uID0gbmV3IFNlY3Rpb24oXHJcbiAgICAgIHtcclxuICAgICAgICBpdGVtczogY2FyZERhdGEsXHJcbiAgICAgICAgcmVuZGVyZXI6IChkYXRhKSA9PiBzZWN0aW9uLmFkZEl0ZW0oY3JlYXRlQ2FyZChkYXRhKSksXHJcbiAgICAgIH0sXHJcbiAgICAgIFwiLmVsZW1lbnRzX19saXN0XCJcclxuICAgICk7XHJcbiAgICB1c2VySWQgPSB1c2VyRGF0YS5faWQ7XHJcbiAgICBzZWN0aW9uLnJlbmRlckl0ZW1zKCk7XHJcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7XHJcbiAgICAgIHByb2ZpbGVOYW1lSW5wdXQ6IHVzZXJEYXRhLm5hbWUsXHJcbiAgICAgIHByb2ZpbGVKb2JJbnB1dDogdXNlckRhdGEuYWJvdXQsXHJcbiAgICB9KTtcclxuXHJcbiAgICBwcm9maWxlQXZhdGFyQ29udGFpbmVyLnByZXBlbmQocHJvZmlsZUF2YXRhcik7XHJcbiAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKHsgYXZhdGFySW1hZ2VJbnB1dDogdXNlckRhdGEuYXZhdGFyIH0pO1xyXG4gIH1cclxuKTtcclxuXHJcbmNvbnN0IHByZXZpZXdJbWFnZU1vZGFsID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiLnBvcHVwX3R5cGVfaW1hZ2VcIik7XHJcbnByZXZpZXdJbWFnZU1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBjb25maXJtTW9kYWwgPSBuZXcgUG9wdXBXaXRoU3VibWl0KFwiLnBvcHVwX3R5cGVfZGVsZXRlLWNhcmRcIik7XHJcbmNvbmZpcm1Nb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuZnVuY3Rpb24gY3JlYXRlQ2FyZChkYXRhKSB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxyXG4gICAge1xyXG4gICAgICBkYXRhLFxyXG4gICAgICBoYW5kbGVDYXJkQ2xpY2s6ICgpID0+IHtcclxuICAgICAgICBwcmV2aWV3SW1hZ2VNb2RhbC5vcGVuKGRhdGEpO1xyXG4gICAgICB9LFxyXG4gICAgICBoYW5kbGVMaWtlSWNvbjogKGlkKSA9PiB7XHJcbiAgICAgICAgY29uc3QgaXNBbHJlYWR5TGlrZWQgPSBjYXJkLmlzTGlrZWQoKTtcclxuXHJcbiAgICAgICAgaWYgKGlzQWxyZWFkeUxpa2VkKSB7XHJcbiAgICAgICAgICBhcGkuZGlzbGlrZUNhcmQoaWQpLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICBjYXJkLmxpa2VDYXJkKHJlcy5saWtlcyk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgYXBpLmxpa2VDYXJkKGlkKS50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgY2FyZC5saWtlQ2FyZChyZXMubGlrZXMpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICBoYW5kbGVEZWxldGVJY29uOiAoaWQpID0+IHtcclxuICAgICAgICBjb25maXJtTW9kYWwub3BlbigpO1xyXG5cclxuICAgICAgICBjb25maXJtTW9kYWwuc2V0QWN0aW9uKCgpID0+IHtcclxuICAgICAgICAgIGFwaS5kZWxldGVDYXJkKGlkKS50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgY2FyZC5yZW1vdmVDYXJkKCk7XHJcbiAgICAgICAgICAgIGNvbmZpcm1Nb2RhbC5jbG9zZSgpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAgdGVtcGxhdGVDYXJkU2VsZWN0b3IsXHJcbiAgICB1c2VySWRcclxuICApO1xyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcclxuICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbn1cclxuXHJcbmNvbnN0IGVkaXRNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiLnBvcHVwX3R5cGVfZWRpdFwiLCBzdW1iaXRFZGl0UHJvZmlsZUZvcm0pO1xyXG5lZGl0TW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmZ1bmN0aW9uIHN1bWJpdEVkaXRQcm9maWxlRm9ybShkYXRhKSB7XHJcbiAgaW1wcm92ZVVYKGVkaXRQcm9maWxlU3VibWl0QnV0dG9uLCBcIlNhdmluZy4uLlwiKTtcclxuICBhcGkuc2V0VXNlckluZm8oZGF0YS5uYW1lLCBkYXRhLmpvYikudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgaW1wcm92ZVVYKGVkaXRQcm9maWxlU3VibWl0QnV0dG9uLCBcIlNhdmVcIik7XHJcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7XHJcbiAgICAgIHByb2ZpbGVOYW1lSW5wdXQ6IGRhdGEubmFtZSxcclxuICAgICAgcHJvZmlsZUpvYklucHV0OiBkYXRhLmFib3V0LFxyXG4gICAgfSk7XHJcbiAgICBlZGl0TW9kYWwuY2xvc2UoKTtcclxuICB9KTtcclxufVxyXG5cclxuY29uc3QgYWRkQ2FyZE1vZGFsID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgXCIucG9wdXBfdHlwZV9hZGQtY2FyZFwiLFxyXG4gIHN1Ym1pdEFkZENhcmRGb3JtXHJcbik7XHJcbmFkZENhcmRNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuZnVuY3Rpb24gc3VibWl0QWRkQ2FyZEZvcm0oZGF0YSkge1xyXG4gIGltcHJvdmVVWChhZGRDYXJkU3VibWl0QnV0dG9uLCBcIkNyZWF0aW5nLi4uXCIpO1xyXG4gIGFwaS5jcmVhdGVDYXJkKGRhdGEpLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgY3JlYXRlQ2FyZChyZXMpO1xyXG4gICAgaW1wcm92ZVVYKGFkZENhcmRTdWJtaXRCdXR0b24sIFwiQ3JlYXRlXCIpO1xyXG4gICAgc2VjdGlvbi5hZGRJdGVtKGNyZWF0ZUNhcmQocmVzKSk7XHJcbiAgICBhZGRDYXJkTW9kYWwuY2xvc2UoKTtcclxuICB9KTtcclxufVxyXG5cclxuY29uc3QgYWRkQXZhdGFyTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIi5wb3B1cF90eXBlX2F2YXRhclwiLFxyXG4gIHN1Ym1pdEFkZEF2YXRhckZvcm1cclxuKTtcclxuYWRkQXZhdGFyTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmZ1bmN0aW9uIHN1Ym1pdEFkZEF2YXRhckZvcm0oZGF0YSkge1xyXG4gIGltcHJvdmVVWChhdmF0YXJTdWJtaXRCdXR0b24sIFwiU2F2aW5nLi4uXCIpO1xyXG4gIGFwaS5zZXRVc2VyQXZhdGFyKGRhdGEubGluaykudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgdXNlckluZm8uc2V0VXNlckF2YXRhcih7IGF2YXRhckltYWdlSW5wdXQ6IGRhdGEuYXZhdGFyIH0pO1xyXG4gICAgaW1wcm92ZVVYKGF2YXRhclN1Ym1pdEJ1dHRvbiwgXCJTYXZlXCIpO1xyXG4gICAgYWRkQXZhdGFyTW9kYWwuY2xvc2UoKTtcclxuICB9KTtcclxufVxyXG5cclxuLy9cclxuY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgZWRpdFByb2ZpbGVGb3JtKTtcclxuY29uc3QgYWRkQ2FyZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgYWRkQ2FyZEZvcm0pO1xyXG5jb25zdCBhZGRBdmF0YXJGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIGFkZEF2YXRhckZvcm0pO1xyXG5cclxuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5hZGRDYXJkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmFkZEF2YXRhckZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuZnVuY3Rpb24gZmlsbFByb2ZpbGVGb3JtUHJldmlvdXNJbnB1dCgpIHtcclxuICBjb25zdCB7IG5hbWUsIGpvYiB9ID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICBwcm9maWxlTmFtZUlucHV0LnZhbHVlID0gbmFtZTtcclxuICBwcm9maWxlSm9iSW5wdXQudmFsdWUgPSBqb2I7XHJcbn1cclxuXHJcbmVkaXRQcm9maWxlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgZmlsbFByb2ZpbGVGb3JtUHJldmlvdXNJbnB1dCgpO1xyXG4gIGVkaXRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGVkaXRNb2RhbC5vcGVuKCk7XHJcbn0pO1xyXG5cclxuYWRkQ2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGFkZENhcmRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGFkZENhcmRNb2RhbC5vcGVuKCk7XHJcbn0pO1xyXG5cclxuYWRkQXZhdGFyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgYWRkQXZhdGFyRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxuICBhZGRBdmF0YXJNb2RhbC5vcGVuKCk7XHJcbn0pO1xyXG4iLCJleHBvcnQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHsgcHJvZmlsZU5hbWVTZWxlY3RvciwgcHJvZmlsZUpvYlNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX3Byb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlTmFtZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3Byb2ZpbGVKb2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVKb2JTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9hdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2ltYWdlXCIpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgam9iOiB0aGlzLl9wcm9maWxlSm9iLnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKHsgcHJvZmlsZU5hbWVJbnB1dCwgcHJvZmlsZUpvYklucHV0IH0pIHtcclxuICAgIHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gcHJvZmlsZU5hbWVJbnB1dDtcclxuICAgIHRoaXMuX3Byb2ZpbGVKb2IudGV4dENvbnRlbnQgPSBwcm9maWxlSm9iSW5wdXQ7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VyQXZhdGFyKHsgYXZhdGFySW1hZ2VJbnB1dCB9KSB7XHJcbiAgICB0aGlzLl9hdmF0YXIuc3JjID0gYXZhdGFySW1hZ2VJbnB1dDtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuXHJcbiAgICB0aGlzLl9pbWFnZUNhcmRNb2RhbCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5faW1hZ2VDYXJkQ2FwdGlvbk1vZGFsID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2FwdGlvblwiKTtcclxuICB9XHJcblxyXG4gIG9wZW4gPSAoZGF0YSkgPT4ge1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XHJcblxyXG4gICAgdGhpcy5faW1hZ2VDYXJkQ2FwdGlvbk1vZGFsLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2ltYWdlQ2FyZE1vZGFsLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9pbWFnZUNhcmRNb2RhbC5hbHQgPSBgTGFuZHNjYXBlIGltYWdlIGZyb20gYSBwbGFjZSBuYW1lZCAke3RoaXMuX25hbWV9YDtcclxuICB9O1xyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoU3VibWl0IGV4dGVuZHMgUG9wdXAge1xyXG4gIHNldEFjdGlvbihhY3Rpb24pIHtcclxuICAgIHRoaXMuX3N1Ym1pdEhhbmRsZXIgPSBhY3Rpb247XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5fc3VibWl0SGFuZGxlcigpO1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwidGVtcGxhdGVDYXJkU2VsZWN0b3IiLCJ1c2VySWQiLCJkYXRhIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlTGlrZUljb24iLCJoYW5kbGVEZWxldGVJY29uIiwidGhpcyIsIl9saXN0SXRlbSIsIl9nZXRUZW1wbGF0ZSIsIl90aXRsZSIsInF1ZXJ5U2VsZWN0b3IiLCJfaW1hZ2UiLCJ0ZXh0Q29udGVudCIsIl9uYW1lIiwic3JjIiwiX2xpbmsiLCJhbHQiLCJfYWRkRXZlbnRMaXN0ZW5lcnMiLCJfb3duZXJJZCIsIl91c2VySWQiLCJfZGVsZXRlQnV0dG9uIiwic3R5bGUiLCJkaXNwbGF5IiwiX2xpa2VzIiwibGVuZ3RoIiwiaXNMaWtlZCIsImxpa2VDYXJkIiwibmFtZSIsImxpbmsiLCJsaWtlcyIsIl90ZW1wbGF0ZUNhcmRTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlRGVsZXRlSWNvbiIsIl9oYW5kbGVMaWtlSWNvbiIsIl9pZCIsIm93bmVyIiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwic29tZSIsInByZXNvbiIsInJlbW92ZUNhcmQiLCJyZW1vdmUiLCJuZXdMaWtlcyIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIl9saWtlQnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNldHRpbmdzIiwiZm9ybSIsIl9pbnB1dHMiLCJldmVyeSIsImlucHV0IiwidmFsaWRpdHkiLCJ2YWxpZCIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfc2V0dGluZ3MiLCJfaXNGb3JtVmFsaWQiLCJfZW5hYmxlU3VibWl0QnV0dG9uIiwiX2J1dHRvbiIsIl9kaXNhYmxlU3VibWl0QnV0dG9uIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2Zvcm0iLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsIl9jaGVja1ZhbGlkaXR5IiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX3Nob3dFcnJvciIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJlcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJhZGQiLCJfaGlkZUVycm9yIiwiYnV0dG9uIiwiZGlzYWJsZWQiLCJyZXNldFZhbGlkYXRpb24iLCJlbmFibGVWYWxpZGF0aW9uIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJrZXkiLCJjbG9zZSIsInRhcmdldCIsImNvbnRhaW5zIiwiX3BvcHVwIiwiYmluZCIsIm9wZW4iLCJfaGFuZGxlRXNjQ2xvc2UiLCJfaGFuZGxlT3ZlcmxheUNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInNldEV2ZW50TGlzdGVuZXJzIiwiUG9wdXBXaXRoRm9ybSIsInBvcHVwIiwic3VibWl0SGFuZGxlciIsInN1cGVyIiwiX3N1Ym1pdEhhbmRsZXIiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dFZhbHVlcyIsInZhbHVlIiwicmVzZXQiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiZWxlbWVudCIsIl9lbGVtZW50IiwiYWRkSXRlbSIsInByZXBlbmQiLCJjdXN0b21GZXRjaCIsInVybCIsImhlYWRlcnMiLCJmZXRjaCIsInRoZW4iLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzVGV4dCIsImNhdGNoIiwiY29uc29sZSIsImxvZyIsImltcHJvdmVVWCIsInRleHQiLCJhcGkiLCJiYXNlVXJsIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsImdldEluaXRpYWxDYXJkcyIsImdldFVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJhYm91dCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiY3JlYXRlQ2FyZCIsImRlbGV0ZUNhcmQiLCJjYXJkSWQiLCJkaXNsaWtlQ2FyZCIsInNldFVzZXJBdmF0YXIiLCJhdmF0YXIiLCJhdXRob3JpemF0aW9uIiwiZWRpdFByb2ZpbGVNb2RhbCIsImFkZE5ld0NhcmRNb2RhbCIsImFkZE5ld0F2YXRhck1vZGFsIiwiZWRpdFByb2ZpbGVGb3JtIiwiYWRkQ2FyZEZvcm0iLCJhZGRBdmF0YXJGb3JtIiwicHJvZmlsZU5hbWVJbnB1dCIsInByb2ZpbGVKb2JJbnB1dCIsImVkaXRQcm9maWxlQnV0dG9uIiwiYWRkQ2FyZEJ1dHRvbiIsImFkZEF2YXRhckJ1dHRvbiIsInByb2ZpbGVBdmF0YXIiLCJwcm9maWxlQXZhdGFyQ29udGFpbmVyIiwiZWRpdFByb2ZpbGVTdWJtaXRCdXR0b24iLCJhZGRDYXJkU3VibWl0QnV0dG9uIiwiYXZhdGFyU3VibWl0QnV0dG9uIiwic2VjdGlvbiIsInVzZXJJbmZvIiwicHJvZmlsZU5hbWVTZWxlY3RvciIsInByb2ZpbGVKb2JTZWxlY3RvciIsIl9wcm9maWxlTmFtZSIsIl9wcm9maWxlSm9iIiwiX2F2YXRhciIsImpvYiIsImF2YXRhckltYWdlSW5wdXQiLCJhbGwiLCJjYXJkRGF0YSIsInVzZXJEYXRhIiwicHJldmlld0ltYWdlTW9kYWwiLCJfaW1hZ2VDYXJkQ2FwdGlvbk1vZGFsIiwiX2ltYWdlQ2FyZE1vZGFsIiwiY29uZmlybU1vZGFsIiwic2V0QWN0aW9uIiwiYWN0aW9uIiwiY2FyZCIsImdlbmVyYXRlQ2FyZCIsImVkaXRNb2RhbCIsImFkZENhcmRNb2RhbCIsImFkZEF2YXRhck1vZGFsIiwiZWRpdEZvcm1WYWxpZGF0b3IiLCJGb3JtVmFsaWRhdG9yIiwiYWRkQ2FyZEZvcm1WYWxpZGF0b3IiLCJhZGRBdmF0YXJGb3JtVmFsaWRhdG9yIiwiZmlsbFByb2ZpbGVGb3JtUHJldmlvdXNJbnB1dCJdLCJzb3VyY2VSb290IjoiIn0=