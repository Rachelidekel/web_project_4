!function(){"use strict";function e(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class t{constructor(t,s,i){let{name:n,link:o}=t;e(this,"_handleLikeIcon",(e=>e.target.classList.toggle("element__title-button_active"))),e(this,"_handleDeleteIcon",(()=>this._listItem.remove())),e(this,"generateCard",(()=>(this._listItem=this._getTemplate(),this._title=this._listItem.querySelector(".element__title-name"),this._image=this._listItem.querySelector(".element__item"),this._title.textContent=this._name,this._image.src=this._link,this._image.alt="Landscape image from a place named ".concat(this._name),this._addEventListeners(),this._listItem))),this._name=n,this._link=o,this._templateCardSelector=s,this._handleCardClick=i}_getTemplate(){return document.querySelector(this._templateCardSelector).content.querySelector(".element").cloneNode(!0)}_addEventListeners(){this._likeButton=this._listItem.querySelector(".element__title-button"),this._deleteButton=this._listItem.querySelector(".element__delete-button"),this._likeButton.addEventListener("click",(e=>{this._handleLikeIcon(e)})),this._deleteButton.addEventListener("click",(()=>{this._handleDeleteIcon()})),this._image.addEventListener("click",(()=>{this._handleCardClick(this._name,this._link)}))}}function s(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var i=class{constructor(e,t){s(this,"_isFormValid",(()=>this._inputs.every((e=>!0===e.validity.valid)))),s(this,"_toggleButtonState",(()=>{const{inactiveButtonClass:e}=this._settings;this._isFormValid()?this._enableSubmitButton(this._button,e):this._disableSubmitButton(this._button,e)})),s(this,"_setEventListeners",(()=>{const{inputSelector:e,submitButtonSelector:t}=this._settings;this._inputs=[...this._form.querySelectorAll(e)],this._button=this._form.querySelector(t),this._inputs.forEach((e=>{e.addEventListener("input",(()=>{this._checkValidity(e,this._settings),this._toggleButtonState()}))}))})),this._settings=e,this._form=t}_showError(e){const{inputErrorClass:t,errorClass:s}=this._settings,i=e.validationMessage,n=this._form.querySelector("#".concat(e.id,"-error"));n.textContent=i,n.classList.add(s),e.classList.add(t)}_hideError(e){const{inputErrorClass:t,errorClass:s}=this._settings,i=this._form.querySelector("#".concat(e.id,"-error"));i.textContent="",i.classList.remove(s),e.classList.remove(t)}_checkValidity(e){e.validity.valid?this._hideError(e):this._showError(e)}_disableSubmitButton(e){const{inactiveButtonClass:t}=this._settings;e.disabled=!0,e.classList.add(t)}_enableSubmitButton(e){const{inactiveButtonClass:t}=this._settings;e.disabled=!1,e.classList.remove(t)}resetValidation(){this._inputs.forEach((e=>{this._hideError(e)})),this._toggleButtonState()}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}};function n(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class o{constructor(e){n(this,"_handleEscClose",(e=>{"Escape"===e.key&&this.close()})),n(this,"_handleOverlayClose",(e=>{(e.target.classList.contains("popup")||e.target.classList.contains("popup__close-button"))&&this.close()})),this._popup=document.querySelector(e),this.close.bind(this)}open(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose),document.addEventListener("mousedown",this._handleOverlayClose)}close(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose),document.removeEventListener("mousedown",this._handleOverlayClose)}setEventListeners(){this._popup.querySelector(".popup__close-icon").addEventListener("click",(()=>{this.close()}))}}class r extends o{constructor(e,t){super(e),this._submitHandler=t,this._form=this._popup.querySelector(".popup__form"),this._inputs=[...this._form.querySelectorAll(".form__input")]}_getInputValues(){const e={};return this._inputs.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._submitHandler(this._getInputValues()),this.close()}))}close(){super.close(),this._form.reset()}}var l=[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}];const a=document.querySelector(".popup_type_edit"),c=document.querySelector(".popup_type_add-card"),_=(document.querySelector(".elements__list"),a.querySelector(".popup__form")),u=c.querySelector(".popup__form"),d=document.querySelector(".form__input_type_name"),p=document.querySelector(".form__input_type_job"),h=document.querySelector(".profile__open-button"),m=document.querySelector(".profile__add-button"),b={inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_disabled",inputErrorClass:"form__input_type_error",errorClass:"popup__error_visible"};l.reverse();const f=new class{constructor(e,t){let{items:s,renderer:i}=e;this._items=s,this._renderer=i,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._element=this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:l,renderer:g},".elements__list");f.renderItems();const v=new class extends o{constructor(e){var t,s;super(e),s=(e,t)=>{super.open(),this._name=e,this._link=t,this._imageCardCaptionModal.textContent=this._name,this._imageCardModal.src=this._link,this._imageCardModal.alt="Landscape image from a place named ".concat(this._name)},(t="open")in this?Object.defineProperty(this,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):this.open=s,this._imageCardModal=this._popup.querySelector(".popup__image"),this._imageCardCaptionModal=this._popup.querySelector(".popup__caption")}}(".popup_type_image");function y(e,t){v.open(e,t)}function g(e){let{name:s,link:i}=e;const n=function(e,s){return new t({name:e,link:s},".element__template",y).generateCard()}(s,i);f.addItem(n)}v.setEventListeners();const S=new class{constructor(e){let{profileNameSelector:t,profileJobSelector:s}=e;this._profileName=document.querySelector(t),this._profileJob=document.querySelector(s)}getUserInfo(){return{name:this._profileName.textContent,job:this._profileJob.textContent}}setUserInfo(e){let{profileNameInput:t,profileJobInput:s}=e;this._profileName.textContent=t,this._profileJob.textContent=s}}({profileNameSelector:".profile__title-name",profileJobSelector:".profile__subtitle-job"}),L=new r(".popup_type_edit",(function(e){let{name:t,job:s}=e;S.setUserInfo({profileNameInput:t,profileJobInput:s}),L.close()}));L.setEventListeners();const C=new r(".popup_type_add-card",(function(e){let{name:t,link:s}=e;g({name:t,link:s}),C.close()}));C.setEventListeners();const E=new i(b,_),k=new i(b,u);E.enableValidation(),k.enableValidation(),h.addEventListener("click",(()=>{!function(){const{name:e,job:t}=S.getUserInfo();d.value=e,p.value=t}(),E.resetValidation(),L.open()})),m.addEventListener("click",(()=>{k.resetValidation(),C.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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OUIsRUFBaUJOLE1BQVFuRixFQUN6QjBGLEVBQWdCUCxNQUFRcUMsRUFJeEJPLEdBQ0FILEVBQWtCaEUsa0JBQ2xCOEQsRUFBVW5ELFVBR1pxQixFQUFjbEUsaUJBQWlCLFNBQVMsS0FDdENvRyxFQUFxQmxFLGtCQUNyQitELEVBQWFwRCxVIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtX3dlYl9wcm9qZWN0XzgvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bV93ZWJfcHJvamVjdF84Ly4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW1fd2ViX3Byb2plY3RfOC8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bV93ZWJfcHJvamVjdF84Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW1fd2ViX3Byb2plY3RfOC8uL3NyYy91dGlscy9pbml0aWFsQ2FyZHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtX3dlYl9wcm9qZWN0XzgvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bV93ZWJfcHJvamVjdF84Ly4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bV93ZWJfcHJvamVjdF84Ly4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW1fd2ViX3Byb2plY3RfOC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bV93ZWJfcHJvamVjdF84Ly4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKHsgbmFtZSwgbGluayB9LCB0ZW1wbGF0ZUNhcmRTZWxlY3RvciwgaGFuZGxlQ2FyZENsaWNrKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBsaW5rO1xyXG4gICAgdGhpcy5fdGVtcGxhdGVDYXJkU2VsZWN0b3IgPSB0ZW1wbGF0ZUNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICB9XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIGNvbnN0IHRlbXBsYXRlTGlzdEl0ZW0gPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl90ZW1wbGF0ZUNhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50XCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG4gICAgcmV0dXJuIHRlbXBsYXRlTGlzdEl0ZW07XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlTGlrZUljb24gPSAoZXZ0KSA9PlxyXG4gICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKFwiZWxlbWVudF9fdGl0bGUtYnV0dG9uX2FjdGl2ZVwiKTtcclxuXHJcbiAgX2hhbmRsZURlbGV0ZUljb24gPSAoKSA9PiB0aGlzLl9saXN0SXRlbS5yZW1vdmUoKTtcclxuXHJcbiAgX2FkZEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2xpc3RJdGVtLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fdGl0bGUtYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fbGlzdEl0ZW0ucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIuZWxlbWVudF9fZGVsZXRlLWJ1dHRvblwiXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlTGlrZUljb24oZXZ0KTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUljb24oKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5faW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX25hbWUsIHRoaXMuX2xpbmspO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZW5lcmF0ZUNhcmQgPSAoKSA9PiB7XHJcbiAgICB0aGlzLl9saXN0SXRlbSA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICB0aGlzLl90aXRsZSA9IHRoaXMuX2xpc3RJdGVtLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fdGl0bGUtbmFtZVwiKTtcclxuICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fbGlzdEl0ZW0ucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19pdGVtXCIpO1xyXG4gICAgdGhpcy5fdGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5faW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2ltYWdlLmFsdCA9IGBMYW5kc2NhcGUgaW1hZ2UgZnJvbSBhIHBsYWNlIG5hbWVkICR7dGhpcy5fbmFtZX1gO1xyXG5cclxuICAgIHRoaXMuX2FkZEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2xpc3RJdGVtO1xyXG4gIH07XHJcbn1cclxuIiwiY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm0pIHtcclxuICAgIHRoaXMuX3NldHRpbmdzID0gc2V0dGluZ3M7XHJcbiAgICB0aGlzLl9mb3JtID0gZm9ybTtcclxuICB9XHJcblxyXG4gIF9zaG93RXJyb3IoaW5wdXQpIHtcclxuICAgIGNvbnN0IHsgaW5wdXRFcnJvckNsYXNzLCBlcnJvckNsYXNzIH0gPSB0aGlzLl9zZXR0aW5ncztcclxuICAgIGNvbnN0IGVycm9yID0gaW5wdXQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0LmlkfS1lcnJvcmApO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3I7XHJcblxyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQoZXJyb3JDbGFzcyk7XHJcbiAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKGlucHV0RXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUVycm9yKGlucHV0KSB7XHJcbiAgICBjb25zdCB7IGlucHV0RXJyb3JDbGFzcywgZXJyb3JDbGFzcyB9ID0gdGhpcy5fc2V0dGluZ3M7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0LmlkfS1lcnJvcmApO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuXHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShlcnJvckNsYXNzKTtcclxuICAgIGlucHV0LmNsYXNzTGlzdC5yZW1vdmUoaW5wdXRFcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9jaGVja1ZhbGlkaXR5KGlucHV0KSB7XHJcbiAgICBpZiAoaW5wdXQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5faGlkZUVycm9yKGlucHV0KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3Nob3dFcnJvcihpbnB1dCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfZGlzYWJsZVN1Ym1pdEJ1dHRvbihidXR0b24pIHtcclxuICAgIGNvbnN0IHsgaW5hY3RpdmVCdXR0b25DbGFzcyB9ID0gdGhpcy5fc2V0dGluZ3M7XHJcbiAgICBidXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgfVxyXG4gIF9lbmFibGVTdWJtaXRCdXR0b24oYnV0dG9uKSB7XHJcbiAgICBjb25zdCB7IGluYWN0aXZlQnV0dG9uQ2xhc3MgfSA9IHRoaXMuX3NldHRpbmdzO1xyXG4gICAgYnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZShpbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9pc0Zvcm1WYWxpZCA9ICgpID0+XHJcbiAgICB0aGlzLl9pbnB1dHMuZXZlcnkoKGlucHV0KSA9PiBpbnB1dC52YWxpZGl0eS52YWxpZCA9PT0gdHJ1ZSk7XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSA9ICgpID0+IHtcclxuICAgIGNvbnN0IHsgaW5hY3RpdmVCdXR0b25DbGFzcyB9ID0gdGhpcy5fc2V0dGluZ3M7XHJcblxyXG4gICAgaWYgKHRoaXMuX2lzRm9ybVZhbGlkKCkpIHtcclxuICAgICAgdGhpcy5fZW5hYmxlU3VibWl0QnV0dG9uKHRoaXMuX2J1dHRvbiwgaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9kaXNhYmxlU3VibWl0QnV0dG9uKHRoaXMuX2J1dHRvbiwgaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xyXG4gICAgY29uc3QgeyBpbnB1dFNlbGVjdG9yLCBzdWJtaXRCdXR0b25TZWxlY3RvciB9ID0gdGhpcy5fc2V0dGluZ3M7XHJcbiAgICB0aGlzLl9pbnB1dHMgPSBbLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKGlucHV0U2VsZWN0b3IpXTtcclxuICAgIHRoaXMuX2J1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihzdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcblxyXG4gICAgdGhpcy5faW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tWYWxpZGl0eShpbnB1dCwgdGhpcy5fc2V0dGluZ3MpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5faW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVFcnJvcihpbnB1dCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5jbG9zZS5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIF9oYW5kbGVPdmVybGF5Q2xvc2UgPSAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoXHJcbiAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBcIikgfHxcclxuICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cF9fY2xvc2UtYnV0dG9uXCIpXHJcbiAgICApIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9oYW5kbGVPdmVybGF5Q2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9oYW5kbGVPdmVybGF5Q2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlLWljb25cIik7XHJcbiAgICBjbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cCwgc3VibWl0SGFuZGxlcikge1xyXG4gICAgc3VwZXIocG9wdXApO1xyXG4gICAgdGhpcy5fc3VibWl0SGFuZGxlciA9IHN1Ym1pdEhhbmRsZXI7XHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX2lucHV0cyA9IFsuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9ybV9faW5wdXRcIildO1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXRWYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGlucHV0VmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEhhbmRsZXIodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xyXG4gIH1cclxufVxyXG4iLCJjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUveW9zZW1pdGUuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYXRlbWFyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvdmFub2lzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFnby5qcGdcIixcclxuICB9LFxyXG5dO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgaW5pdGlhbENhcmRzO1xyXG4iLCIvL21vZGFsc1xyXG5jb25zdCBlZGl0UHJvZmlsZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX2VkaXRcIik7XHJcbmNvbnN0IGFkZE5ld0NhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdHlwZV9hZGQtY2FyZFwiKTtcclxuXHJcbmV4cG9ydCBjb25zdCB0ZW1wbGF0ZUNhcmRTZWxlY3RvciA9IFwiLmVsZW1lbnRfX3RlbXBsYXRlXCI7XHJcbmV4cG9ydCBjb25zdCBsaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fbGlzdFwiKTtcclxuXHJcbi8vZm9ybXNcclxuZXhwb3J0IGNvbnN0IGVkaXRQcm9maWxlRm9ybSA9IGVkaXRQcm9maWxlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcclxuZXhwb3J0IGNvbnN0IGFkZENhcmRGb3JtID0gYWRkTmV3Q2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XHJcblxyXG5leHBvcnQgY29uc3QgcHJvZmlsZU5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIuZm9ybV9faW5wdXRfdHlwZV9uYW1lXCJcclxuKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVKb2JJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9faW5wdXRfdHlwZV9qb2JcIik7XHJcblxyXG4vL29wZW4gbW9kYWwgYnV0dG9uc1xyXG5leHBvcnQgY29uc3QgZWRpdFByb2ZpbGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLnByb2ZpbGVfX29wZW4tYnV0dG9uXCJcclxuKTtcclxuZXhwb3J0IGNvbnN0IGFkZGNhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XHJcblxyXG4vL3NldHRpbmdzXHJcbmV4cG9ydCBjb25zdCBzZXR0aW5ncyA9IHtcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5mb3JtX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5mb3JtX19idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcImZvcm1fX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJmb3JtX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJwb3B1cF9fZXJyb3JfdmlzaWJsZVwiLFxyXG59O1xyXG5cclxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IHsgQ2FyZCB9IGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgeyBQb3B1cFdpdGhGb3JtIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IHsgU2VjdGlvbiB9IGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IHsgVXNlckluZm8gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgaW5pdGlhbENhcmRzIGZyb20gXCIuLi91dGlscy9pbml0aWFsQ2FyZHMuanNcIjtcclxuaW1wb3J0IHtcclxuICB0ZW1wbGF0ZUNhcmRTZWxlY3RvcixcclxuICBsaXN0LFxyXG4gIGVkaXRQcm9maWxlRm9ybSxcclxuICBhZGRDYXJkRm9ybSxcclxuICBwcm9maWxlTmFtZUlucHV0LFxyXG4gIHByb2ZpbGVKb2JJbnB1dCxcclxuICBlZGl0UHJvZmlsZUJ1dHRvbixcclxuICBhZGRjYXJkQnV0dG9uLFxyXG4gIHNldHRpbmdzLFxyXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuXHJcbmluaXRpYWxDYXJkcy5yZXZlcnNlKCk7XHJcblxyXG5jb25zdCBzZWN0aW9uID0gbmV3IFNlY3Rpb24oXHJcbiAge1xyXG4gICAgaXRlbXM6IGluaXRpYWxDYXJkcyxcclxuICAgIHJlbmRlcmVyOiByZW5kZXJDYXJkLFxyXG4gIH0sXHJcbiAgXCIuZWxlbWVudHNfX2xpc3RcIlxyXG4pO1xyXG5zZWN0aW9uLnJlbmRlckl0ZW1zKCk7XHJcblxyXG5jb25zdCBwcmV2aWV3SW1hZ2VNb2RhbCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIi5wb3B1cF90eXBlX2ltYWdlXCIpO1xyXG5wcmV2aWV3SW1hZ2VNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlSW1hZ2VQcmV2aWV3KG5hbWUsIGxpbmspIHtcclxuICBwcmV2aWV3SW1hZ2VNb2RhbC5vcGVuKG5hbWUsIGxpbmspO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVDYXJkKG5hbWUsIGxpbmspIHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXHJcbiAgICB7IG5hbWUsIGxpbmsgfSxcclxuICAgIHRlbXBsYXRlQ2FyZFNlbGVjdG9yLFxyXG4gICAgaGFuZGxlSW1hZ2VQcmV2aWV3XHJcbiAgKTtcclxuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2VuZXJhdGVDYXJkKCk7XHJcbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXJDYXJkKHsgbmFtZSwgbGluayB9KSB7XHJcbiAgY29uc3QgbGlzdEl0ZW0gPSBjcmVhdGVDYXJkKG5hbWUsIGxpbmspO1xyXG4gIHNlY3Rpb24uYWRkSXRlbShsaXN0SXRlbSk7XHJcbn1cclxuXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICBwcm9maWxlTmFtZVNlbGVjdG9yOiBcIi5wcm9maWxlX190aXRsZS1uYW1lXCIsXHJcbiAgcHJvZmlsZUpvYlNlbGVjdG9yOiBcIi5wcm9maWxlX19zdWJ0aXRsZS1qb2JcIixcclxufSk7XHJcblxyXG5jb25zdCBlZGl0TW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybShcIi5wb3B1cF90eXBlX2VkaXRcIiwgc3VtYml0RWRpdFByb2ZpbGVGb3JtKTtcclxuZWRpdE1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5mdW5jdGlvbiBzdW1iaXRFZGl0UHJvZmlsZUZvcm0oeyBuYW1lLCBqb2IgfSkge1xyXG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKHsgcHJvZmlsZU5hbWVJbnB1dDogbmFtZSwgcHJvZmlsZUpvYklucHV0OiBqb2IgfSk7XHJcbiAgZWRpdE1vZGFsLmNsb3NlKCk7XHJcbn1cclxuXHJcbmNvbnN0IGFkZENhcmRNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiLnBvcHVwX3R5cGVfYWRkLWNhcmRcIixcclxuICBzdWJtaXRBZGRDYXJkRm9ybVxyXG4pO1xyXG5hZGRDYXJkTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmZ1bmN0aW9uIHN1Ym1pdEFkZENhcmRGb3JtKHsgbmFtZSwgbGluayB9KSB7XHJcbiAgcmVuZGVyQ2FyZCh7IG5hbWUsIGxpbmsgfSk7XHJcbiAgYWRkQ2FyZE1vZGFsLmNsb3NlKCk7XHJcbn1cclxuXHJcbi8vXHJcbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIGVkaXRQcm9maWxlRm9ybSk7XHJcbmNvbnN0IGFkZENhcmRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIGFkZENhcmRGb3JtKTtcclxuXHJcbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuYWRkQ2FyZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuZnVuY3Rpb24gZmlsbFByb2ZpbGVGb3JtUHJldmlvdXNJbnB1dCgpIHtcclxuICBjb25zdCB7IG5hbWUsIGpvYiB9ID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICBwcm9maWxlTmFtZUlucHV0LnZhbHVlID0gbmFtZTtcclxuICBwcm9maWxlSm9iSW5wdXQudmFsdWUgPSBqb2I7XHJcbn1cclxuXHJcbmVkaXRQcm9maWxlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgZmlsbFByb2ZpbGVGb3JtUHJldmlvdXNJbnB1dCgpO1xyXG4gIGVkaXRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGVkaXRNb2RhbC5vcGVuKCk7XHJcbn0pO1xyXG5cclxuYWRkY2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGFkZENhcmRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGFkZENhcmRNb2RhbC5vcGVuKCk7XHJcbn0pO1xyXG4iLCJleHBvcnQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG5cclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9yZW5kZXJlcihlbGVtZW50KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn1cclxuXHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcblxyXG4gICAgdGhpcy5faW1hZ2VDYXJkTW9kYWwgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2ltYWdlQ2FyZENhcHRpb25Nb2RhbCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2NhcHRpb25cIik7XHJcbiAgfVxyXG5cclxuICBvcGVuID0gKG5hbWUsIGxpbmspID0+IHtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGxpbms7XHJcblxyXG4gICAgdGhpcy5faW1hZ2VDYXJkQ2FwdGlvbk1vZGFsLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2ltYWdlQ2FyZE1vZGFsLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9pbWFnZUNhcmRNb2RhbC5hbHQgPSBgTGFuZHNjYXBlIGltYWdlIGZyb20gYSBwbGFjZSBuYW1lZCAke3RoaXMuX25hbWV9YDtcclxuICB9O1xyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyBwcm9maWxlTmFtZVNlbGVjdG9yLCBwcm9maWxlSm9iU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVOYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcHJvZmlsZUpvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZmlsZUpvYlNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmFtZTogdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQsXHJcbiAgICAgIGpvYjogdGhpcy5fcHJvZmlsZUpvYi50ZXh0Q29udGVudCxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh7IHByb2ZpbGVOYW1lSW5wdXQsIHByb2ZpbGVKb2JJbnB1dCB9KSB7XHJcbiAgICB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IHByb2ZpbGVOYW1lSW5wdXQ7XHJcbiAgICB0aGlzLl9wcm9maWxlSm9iLnRleHRDb250ZW50ID0gcHJvZmlsZUpvYklucHV0O1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwidGVtcGxhdGVDYXJkU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJuYW1lIiwibGluayIsImV2dCIsInRhcmdldCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsInRoaXMiLCJfbGlzdEl0ZW0iLCJyZW1vdmUiLCJfZ2V0VGVtcGxhdGUiLCJfdGl0bGUiLCJxdWVyeVNlbGVjdG9yIiwiX2ltYWdlIiwidGV4dENvbnRlbnQiLCJfbmFtZSIsInNyYyIsIl9saW5rIiwiYWx0IiwiX2FkZEV2ZW50TGlzdGVuZXJzIiwiX3RlbXBsYXRlQ2FyZFNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsImRvY3VtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsIl9saWtlQnV0dG9uIiwiX2RlbGV0ZUJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlTGlrZUljb24iLCJfaGFuZGxlRGVsZXRlSWNvbiIsInNldHRpbmdzIiwiZm9ybSIsIl9pbnB1dHMiLCJldmVyeSIsImlucHV0IiwidmFsaWRpdHkiLCJ2YWxpZCIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfc2V0dGluZ3MiLCJfaXNGb3JtVmFsaWQiLCJfZW5hYmxlU3VibWl0QnV0dG9uIiwiX2J1dHRvbiIsIl9kaXNhYmxlU3VibWl0QnV0dG9uIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2Zvcm0iLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsIl9jaGVja1ZhbGlkaXR5IiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX3Nob3dFcnJvciIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJlcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJhZGQiLCJfaGlkZUVycm9yIiwiYnV0dG9uIiwiZGlzYWJsZWQiLCJyZXNldFZhbGlkYXRpb24iLCJlbmFibGVWYWxpZGF0aW9uIiwicHJldmVudERlZmF1bHQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJrZXkiLCJjbG9zZSIsImNvbnRhaW5zIiwiX3BvcHVwIiwiYmluZCIsIm9wZW4iLCJfaGFuZGxlRXNjQ2xvc2UiLCJfaGFuZGxlT3ZlcmxheUNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInNldEV2ZW50TGlzdGVuZXJzIiwiUG9wdXBXaXRoRm9ybSIsInBvcHVwIiwic3VibWl0SGFuZGxlciIsInN1cGVyIiwiX3N1Ym1pdEhhbmRsZXIiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dFZhbHVlcyIsInZhbHVlIiwicmVzZXQiLCJlZGl0UHJvZmlsZU1vZGFsIiwiYWRkTmV3Q2FyZE1vZGFsIiwiZWRpdFByb2ZpbGVGb3JtIiwiYWRkQ2FyZEZvcm0iLCJwcm9maWxlTmFtZUlucHV0IiwicHJvZmlsZUpvYklucHV0IiwiZWRpdFByb2ZpbGVCdXR0b24iLCJhZGRjYXJkQnV0dG9uIiwiaW5pdGlhbENhcmRzIiwic2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsImVsZW1lbnQiLCJfZWxlbWVudCIsImFkZEl0ZW0iLCJwcmVwZW5kIiwicmVuZGVyQ2FyZCIsInByZXZpZXdJbWFnZU1vZGFsIiwiX2ltYWdlQ2FyZENhcHRpb25Nb2RhbCIsIl9pbWFnZUNhcmRNb2RhbCIsImhhbmRsZUltYWdlUHJldmlldyIsImxpc3RJdGVtIiwiZ2VuZXJhdGVDYXJkIiwiY3JlYXRlQ2FyZCIsInVzZXJJbmZvIiwicHJvZmlsZU5hbWVTZWxlY3RvciIsInByb2ZpbGVKb2JTZWxlY3RvciIsIl9wcm9maWxlTmFtZSIsIl9wcm9maWxlSm9iIiwiZ2V0VXNlckluZm8iLCJqb2IiLCJzZXRVc2VySW5mbyIsImVkaXRNb2RhbCIsImFkZENhcmRNb2RhbCIsImVkaXRGb3JtVmFsaWRhdG9yIiwiRm9ybVZhbGlkYXRvciIsImFkZENhcmRGb3JtVmFsaWRhdG9yIiwiZmlsbFByb2ZpbGVGb3JtUHJldmlvdXNJbnB1dCJdLCJzb3VyY2VSb290IjoiIn0=