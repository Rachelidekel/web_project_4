!function(){"use strict";function e(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class t{constructor(t,s,n){let{name:i,link:o}=t;e(this,"_handleLikeIcon",(e=>e.target.classList.toggle("element__title-button_active"))),e(this,"_handleDeleteIcon",(()=>this._listItem.remove())),e(this,"generateCard",(()=>(this._listItem=this._getTemplate(),this._title=this._listItem.querySelector(".element__title-name"),this._image=this._listItem.querySelector(".element__item"),this._title.textContent=this._name,this._image.src=this._link,this._image.alt="Landscape image from a place named ".concat(this._name),this._addEventListeners(),this._listItem))),this._name=i,this._link=o,this._templateCardSelector=s,this._handleCardClick=n}_getTemplate(){return document.querySelector(this._templateCardSelector).content.querySelector(".element").cloneNode(!0)}_addEventListeners(){this._likeButton=this._listItem.querySelector(".element__title-button"),this._deleteButton=this._listItem.querySelector(".element__delete-button"),this._likeButton.addEventListener("click",(e=>{this._handleLikeIcon(e)})),this._deleteButton.addEventListener("click",(()=>{this._handleDeleteIcon()})),this._image.addEventListener("click",(()=>{this._handleCardClick(this._name,this._link)}))}}function s(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var n=class{constructor(e,t){s(this,"_isFormValid",(()=>this._inputs.every((e=>!0===e.validity.valid)))),s(this,"_toggleButtonState",(()=>{const{inactiveButtonClass:e}=this._settings;this._isFormValid()?this._enableSubmitButton(this._button,e):this._disableSubmitButton(this._button,e)})),s(this,"_setEventListeners",(()=>{const{inputSelector:e,submitButtonSelector:t}=this._settings;this._inputs=[...this._form.querySelectorAll(e)],this._button=this._form.querySelector(t),this._inputs.forEach((e=>{e.addEventListener("input",(()=>{this._checkValidity(e,this._settings),this._toggleButtonState()}))}))})),this._settings=e,this._form=t}_showError(e){const{inputErrorClass:t,errorClass:s}=this._settings,n=e.validationMessage,i=this._form.querySelector("#".concat(e.id,"-error"));i.textContent=n,i.classList.add(s),e.classList.add(t)}_hideError(e){const{inputErrorClass:t,errorClass:s}=this._settings,n=this._form.querySelector("#".concat(e.id,"-error"));n.textContent="",n.classList.remove(s),e.classList.remove(t)}_checkValidity(e){e.validity.valid?this._hideError(e):this._showError(e)}_disableSubmitButton(e){const{inactiveButtonClass:t}=this._settings;e.disabled=!0,e.classList.add(t)}_enableSubmitButton(e){const{inactiveButtonClass:t}=this._settings;e.disabled=!1,e.classList.remove(t)}resetValidation(){this._inputs.forEach((e=>{this._hideError(e)})),this._toggleButtonState()}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}};function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class o{constructor(e){i(this,"_handleEscClose",(e=>{"Escape"===e.key&&this.close()})),i(this,"_handleOverlayClose",(e=>{(e.target.classList.contains("popup")||e.target.classList.contains("popup__close-button"))&&this.close()})),this._popup=document.querySelector(e),this.close.bind(this)}open(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose),document.addEventListener("mousedown",this._handleOverlayClose)}close(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose),document.removeEventListener("mousedown",this._handleOverlayClose)}setEventListeners(){this._popup.querySelector(".popup__close-icon").addEventListener("click",(()=>{this.close()}))}}class r extends o{constructor(e,t){super(e),this._submitHandler=t,this._form=this._popup.querySelector(".popup__form")}_getInputValues(){const e={};return this._inputs=[...this._form.querySelectorAll(".form__input")],this._inputs.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._submitHandler(this._getInputValues()),this.close()}))}close(){super.close(),this._form.reset()}}var l=[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}];const a=document.querySelector(".popup_type_edit"),c=document.querySelector(".popup_type_add-card"),_=document.querySelector(".elements__list"),u=a.querySelector(".popup__form"),p=c.querySelector(".popup__form"),d=document.querySelector(".form__input_type_name"),h=document.querySelector(".form__input_type_job"),m=document.querySelector(".profile__open-button"),b=document.querySelector(".profile__add-button"),f={inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_disabled",inputErrorClass:"form__input_type_error",errorClass:"popup__error_visible"};l.reverse();const v=new class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._element=this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:l,renderer:S},".element__template");v.renderItems();const y=new class extends o{constructor(e){var t,s;super(e),s=(e,t)=>{super.open(),this._name=e,this._link=t;const s=this._popup.querySelector(".popup__image");this._popup.querySelector(".popup__caption").textContent=this._name,s.src=this._link,s.alt="Landscape image from a place named ".concat(this._name)},(t="open")in this?Object.defineProperty(this,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):this.open=s}}(".popup_type_image");function g(e,t){y.open(e,t)}function S(e,s){let{name:n,link:i}=e;const o=new t({name:n,link:i},".element__template",g);_.prepend(o.generateCard(s))}y.setEventListeners();const L=new class{constructor(e){let{profileNameSelector:t,profileJobSelector:s}=e;this._profileName=document.querySelector(t),this._profileJob=document.querySelector(s)}getUserInfo(){return{name:this._profileName.textContent,job:this._profileJob.textContent}}setUserInfo(e){let{profileNameInput:t,profileJobInput:s}=e;this._profileName.textContent=t,this._profileJob.textContent=s}}({profileNameSelector:".profile__title-name",profileJobSelector:".profile__subtitle-job"}),E=new r(".popup_type_edit",(function(e){let{name:t,job:s}=e;L.setUserInfo({profileNameInput:t,profileJobInput:s}),E.close()}));E.setEventListeners();const k=new r(".popup_type_add-card",(function(e){let{name:t,link:s}=e;const n=S({name:t,link:s});v.addItem(n),k.close()}));k.setEventListeners();const C=new n(f,u),q=new n(f,p);C.enableValidation(),q.enableValidation(),m.addEventListener("click",(()=>{!function(){const e=L.getUserInfo(),t=L.getUserInfo();d.value=e.name,h.value=t.job}(),C.resetValidation(),E.open()})),b.addEventListener("click",(()=>{q.resetValidation(),k.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVE2QyxFQUFXUixJQUluQ1MsR0FDQUwsRUFBa0JoRSxrQkFDbEI4RCxFQUFVbkQsVUFHWnNCLEVBQWNuRSxpQkFBaUIsU0FBUyxLQUN0Q29HLEVBQXFCbEUsa0JBQ3JCK0QsRUFBYXBELFUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW1fd2ViX3Byb2plY3RfOC8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtX3dlYl9wcm9qZWN0XzgvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bV93ZWJfcHJvamVjdF84Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtX3dlYl9wcm9qZWN0XzgvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bV93ZWJfcHJvamVjdF84Ly4vc3JjL3V0aWxzL2luaXRpYWxDYXJkcy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW1fd2ViX3Byb2plY3RfOC8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtX3dlYl9wcm9qZWN0XzgvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtX3dlYl9wcm9qZWN0XzgvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bV93ZWJfcHJvamVjdF84Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtX3dlYl9wcm9qZWN0XzgvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoeyBuYW1lLCBsaW5rIH0sIHRlbXBsYXRlQ2FyZFNlbGVjdG9yLCBoYW5kbGVDYXJkQ2xpY2spIHtcclxuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGxpbms7XHJcbiAgICB0aGlzLl90ZW1wbGF0ZUNhcmRTZWxlY3RvciA9IHRlbXBsYXRlQ2FyZFNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG4gIH1cclxuXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgY29uc3QgdGVtcGxhdGVMaXN0SXRlbSA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlQ2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgICByZXR1cm4gdGVtcGxhdGVMaXN0SXRlbTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVMaWtlSWNvbiA9IChldnQpID0+XHJcbiAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoXCJlbGVtZW50X190aXRsZS1idXR0b25fYWN0aXZlXCIpO1xyXG5cclxuICBfaGFuZGxlRGVsZXRlSWNvbiA9ICgpID0+IHRoaXMuX2xpc3RJdGVtLnJlbW92ZSgpO1xyXG5cclxuICBfYWRkRXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fbGlzdEl0ZW0ucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X190aXRsZS1idXR0b25cIik7XHJcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9saXN0SXRlbS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5lbGVtZW50X19kZWxldGUtYnV0dG9uXCJcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVMaWtlSWNvbihldnQpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9kZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlRGVsZXRlSWNvbigpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9pbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5fbmFtZSwgdGhpcy5fbGluayk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGdlbmVyYXRlQ2FyZCA9ICgpID0+IHtcclxuICAgIHRoaXMuX2xpc3RJdGVtID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIHRoaXMuX3RpdGxlID0gdGhpcy5fbGlzdEl0ZW0ucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X190aXRsZS1uYW1lXCIpO1xyXG4gICAgdGhpcy5faW1hZ2UgPSB0aGlzLl9saXN0SXRlbS5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2l0ZW1cIik7XHJcbiAgICB0aGlzLl90aXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9pbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gYExhbmRzY2FwZSBpbWFnZSBmcm9tIGEgcGxhY2UgbmFtZWQgJHt0aGlzLl9uYW1lfWA7XHJcblxyXG4gICAgdGhpcy5fYWRkRXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fbGlzdEl0ZW07XHJcbiAgfTtcclxufVxyXG4iLCJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybSkge1xyXG4gICAgdGhpcy5fc2V0dGluZ3MgPSBzZXR0aW5ncztcclxuICAgIHRoaXMuX2Zvcm0gPSBmb3JtO1xyXG4gIH1cclxuXHJcbiAgX3Nob3dFcnJvcihpbnB1dCkge1xyXG4gICAgY29uc3QgeyBpbnB1dEVycm9yQ2xhc3MsIGVycm9yQ2xhc3MgfSA9IHRoaXMuX3NldHRpbmdzO1xyXG4gICAgY29uc3QgZXJyb3IgPSBpbnB1dC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXQuaWR9LWVycm9yYCk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvcjtcclxuXHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZChlcnJvckNsYXNzKTtcclxuICAgIGlucHV0LmNsYXNzTGlzdC5hZGQoaW5wdXRFcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlRXJyb3IoaW5wdXQpIHtcclxuICAgIGNvbnN0IHsgaW5wdXRFcnJvckNsYXNzLCBlcnJvckNsYXNzIH0gPSB0aGlzLl9zZXR0aW5ncztcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXQuaWR9LWVycm9yYCk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG5cclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGVycm9yQ2xhc3MpO1xyXG4gICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZShpbnB1dEVycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrVmFsaWRpdHkoaW5wdXQpIHtcclxuICAgIGlmIChpbnB1dC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9oaWRlRXJyb3IoaW5wdXQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc2hvd0Vycm9yKGlucHV0KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9kaXNhYmxlU3VibWl0QnV0dG9uKGJ1dHRvbikge1xyXG4gICAgY29uc3QgeyBpbmFjdGl2ZUJ1dHRvbkNsYXNzIH0gPSB0aGlzLl9zZXR0aW5ncztcclxuICAgIGJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICBidXR0b24uY2xhc3NMaXN0LmFkZChpbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICB9XHJcbiAgX2VuYWJsZVN1Ym1pdEJ1dHRvbihidXR0b24pIHtcclxuICAgIGNvbnN0IHsgaW5hY3RpdmVCdXR0b25DbGFzcyB9ID0gdGhpcy5fc2V0dGluZ3M7XHJcbiAgICBidXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKGluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2lzRm9ybVZhbGlkID0gKCkgPT5cclxuICAgIHRoaXMuX2lucHV0cy5ldmVyeSgoaW5wdXQpID0+IGlucHV0LnZhbGlkaXR5LnZhbGlkID09PSB0cnVlKTtcclxuXHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlID0gKCkgPT4ge1xyXG4gICAgY29uc3QgeyBpbmFjdGl2ZUJ1dHRvbkNsYXNzIH0gPSB0aGlzLl9zZXR0aW5ncztcclxuXHJcbiAgICBpZiAodGhpcy5faXNGb3JtVmFsaWQoKSkge1xyXG4gICAgICB0aGlzLl9lbmFibGVTdWJtaXRCdXR0b24odGhpcy5fYnV0dG9uLCBpbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2Rpc2FibGVTdWJtaXRCdXR0b24odGhpcy5fYnV0dG9uLCBpbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMgPSAoKSA9PiB7XHJcbiAgICBjb25zdCB7IGlucHV0U2VsZWN0b3IsIHN1Ym1pdEJ1dHRvblNlbGVjdG9yIH0gPSB0aGlzLl9zZXR0aW5ncztcclxuICAgIHRoaXMuX2lucHV0cyA9IFsuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoaW5wdXRTZWxlY3RvcildO1xyXG4gICAgdGhpcy5fYnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja1ZhbGlkaXR5KGlucHV0LCB0aGlzLl9zZXR0aW5ncyk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9pbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgdGhpcy5faGlkZUVycm9yKGlucHV0KTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLmNsb3NlLmJpbmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgX2hhbmRsZU92ZXJsYXlDbG9zZSA9IChldnQpID0+IHtcclxuICAgIGlmIChcclxuICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cFwiKSB8fFxyXG4gICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX19jbG9zZS1idXR0b25cIilcclxuICAgICkge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMuX2hhbmRsZU92ZXJsYXlDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMuX2hhbmRsZU92ZXJsYXlDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2UtaWNvblwiKTtcclxuICAgIGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwLCBzdWJtaXRIYW5kbGVyKSB7XHJcbiAgICBzdXBlcihwb3B1cCk7XHJcbiAgICB0aGlzLl9zdWJtaXRIYW5kbGVyID0gc3VibWl0SGFuZGxlcjtcclxuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcclxuICAgIHRoaXMuX2lucHV0cyA9IFsuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9ybV9faW5wdXRcIildO1xyXG5cclxuICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gaW5wdXRWYWx1ZXM7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5fc3VibWl0SGFuZGxlcih0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgfVxyXG59XHJcbiIsImNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS95b3NlbWl0ZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhdGVtYXIuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS92YW5vaXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWdvLmpwZ1wiLFxyXG4gIH0sXHJcbl07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBpbml0aWFsQ2FyZHM7XHJcbiIsIi8vbW9kYWxzXHJcbmNvbnN0IGVkaXRQcm9maWxlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3R5cGVfZWRpdFwiKTtcclxuY29uc3QgYWRkTmV3Q2FyZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX2FkZC1jYXJkXCIpO1xyXG5cclxuZXhwb3J0IGNvbnN0IHRlbXBsYXRlQ2FyZFNlbGVjdG9yID0gXCIuZWxlbWVudF9fdGVtcGxhdGVcIjtcclxuZXhwb3J0IGNvbnN0IGxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19saXN0XCIpO1xyXG5cclxuLy9mb3Jtc1xyXG5leHBvcnQgY29uc3QgZWRpdFByb2ZpbGVGb3JtID0gZWRpdFByb2ZpbGVNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xyXG5leHBvcnQgY29uc3QgYWRkQ2FyZEZvcm0gPSBhZGROZXdDYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcclxuXHJcbi8vXHJcbi8vZXhwb3J0IGNvbnN0IGltYWdlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3R5cGVfaW1hZ2VcIik7XHJcbi8vY29uc3QgaW1hZ2VDYXJkTW9kYWwgPSBpbWFnZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpO1xyXG4vL2NvbnN0IGltYWdlQ2FyZENhcHRpb25Nb2RhbCA9IGltYWdlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2FwdGlvblwiKTtcclxuXHJcbmV4cG9ydCBjb25zdCBwcm9maWxlTmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5mb3JtX19pbnB1dF90eXBlX25hbWVcIlxyXG4pO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUpvYklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19pbnB1dF90eXBlX2pvYlwiKTtcclxuXHJcbi8vb3BlbiBtb2RhbCBidXR0b25zXHJcbmV4cG9ydCBjb25zdCBlZGl0UHJvZmlsZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIucHJvZmlsZV9fb3Blbi1idXR0b25cIlxyXG4pO1xyXG5leHBvcnQgY29uc3QgYWRkY2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuXHJcbi8vc2V0dGluZ3NcclxuZXhwb3J0IGNvbnN0IHNldHRpbmdzID0ge1xyXG4gIGlucHV0U2VsZWN0b3I6IFwiLmZvcm1fX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLmZvcm1fX2J1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwiZm9ybV9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcImZvcm1fX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcInBvcHVwX19lcnJvcl92aXNpYmxlXCIsXHJcbn07XHJcblxyXG4iLCJpbXBvcnQgXCIuL3BhZ2VzL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgeyBDYXJkIH0gZnJvbSBcIi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgeyBQb3B1cFdpdGhGb3JtIH0gZnJvbSBcIi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCB7IFNlY3Rpb24gfSBmcm9tIFwiLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IHsgVXNlckluZm8gfSBmcm9tIFwiLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCBpbml0aWFsQ2FyZHMgZnJvbSBcIi4vdXRpbHMvaW5pdGlhbENhcmRzXCI7XHJcbmltcG9ydCB7XHJcbiAgdGVtcGxhdGVDYXJkU2VsZWN0b3IsXHJcbiAgbGlzdCxcclxuICBlZGl0UHJvZmlsZUZvcm0sXHJcbiAgYWRkQ2FyZEZvcm0sXHJcbiAgcHJvZmlsZU5hbWVJbnB1dCxcclxuICBwcm9maWxlSm9iSW5wdXQsXHJcbiAgZWRpdFByb2ZpbGVCdXR0b24sXHJcbiAgYWRkY2FyZEJ1dHRvbixcclxuICBzZXR0aW5ncyxcclxufSBmcm9tIFwiLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuXHJcblxyXG5pbml0aWFsQ2FyZHMucmV2ZXJzZSgpO1xyXG5cclxuY29uc3Qgc2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gIHtcclxuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXHJcbiAgICByZW5kZXJlcjogcmVuZGVyQ2FyZCxcclxuICB9LFxyXG4gIFwiLmVsZW1lbnRfX3RlbXBsYXRlXCJcclxuKTtcclxuc2VjdGlvbi5yZW5kZXJJdGVtcygpO1xyXG5cclxuY29uc3QgcHJldmlld0ltYWdlTW9kYWwgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIucG9wdXBfdHlwZV9pbWFnZVwiKTtcclxucHJldmlld0ltYWdlTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUltYWdlUHJldmlldyhuYW1lLCBsaW5rKSB7XHJcbiAgcHJldmlld0ltYWdlTW9kYWwub3BlbihuYW1lLCBsaW5rKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVyQ2FyZCh7IG5hbWUsIGxpbmsgfSwgY2FyZCkge1xyXG4gIGNvbnN0IGxpc3RJdGVtID0gbmV3IENhcmQoXHJcbiAgICB7IG5hbWUsIGxpbmsgfSxcclxuICAgIHRlbXBsYXRlQ2FyZFNlbGVjdG9yLFxyXG4gICAgaGFuZGxlSW1hZ2VQcmV2aWV3XHJcbiAgKTtcclxuICBsaXN0LnByZXBlbmQobGlzdEl0ZW0uZ2VuZXJhdGVDYXJkKGNhcmQpKTtcclxufVxyXG5cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gIHByb2ZpbGVOYW1lU2VsZWN0b3I6IFwiLnByb2ZpbGVfX3RpdGxlLW5hbWVcIixcclxuICBwcm9maWxlSm9iU2VsZWN0b3I6IFwiLnByb2ZpbGVfX3N1YnRpdGxlLWpvYlwiLFxyXG59KTtcclxuXHJcbmNvbnN0IGVkaXRNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiLnBvcHVwX3R5cGVfZWRpdFwiLCBzdW1iaXRFZGl0UHJvZmlsZUZvcm0pO1xyXG5lZGl0TW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmZ1bmN0aW9uIHN1bWJpdEVkaXRQcm9maWxlRm9ybSh7IG5hbWUsIGpvYiB9KSB7XHJcbiAgdXNlckluZm8uc2V0VXNlckluZm8oeyBwcm9maWxlTmFtZUlucHV0OiBuYW1lLCBwcm9maWxlSm9iSW5wdXQ6IGpvYiB9KTtcclxuICBlZGl0TW9kYWwuY2xvc2UoKTtcclxufVxyXG5cclxuY29uc3QgYWRkQ2FyZE1vZGFsID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgXCIucG9wdXBfdHlwZV9hZGQtY2FyZFwiLFxyXG4gIHN1Ym1pdEFkZENhcmRGb3JtXHJcbik7XHJcbmFkZENhcmRNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuZnVuY3Rpb24gc3VibWl0QWRkQ2FyZEZvcm0oeyBuYW1lLCBsaW5rIH0pIHtcclxuICBjb25zdCBlbGVtZW50ID0gcmVuZGVyQ2FyZCh7IG5hbWUsIGxpbmsgfSk7XHJcbiAgc2VjdGlvbi5hZGRJdGVtKGVsZW1lbnQpO1xyXG4gIGFkZENhcmRNb2RhbC5jbG9zZSgpO1xyXG59XHJcblxyXG4vL1xyXG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBlZGl0UHJvZmlsZUZvcm0pO1xyXG5jb25zdCBhZGRDYXJkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBhZGRDYXJkRm9ybSk7XHJcblxyXG5lZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmFkZENhcmRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmZ1bmN0aW9uIGZpbGxQcm9maWxlRm9ybVByZXZpb3VzSW5wdXQoKSB7XHJcbiAgY29uc3QgcHJvZmlsZU5hbWUgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIGNvbnN0IHByb2ZpbGVKb2IgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIHByb2ZpbGVOYW1lSW5wdXQudmFsdWUgPSBwcm9maWxlTmFtZS5uYW1lO1xyXG4gIHByb2ZpbGVKb2JJbnB1dC52YWx1ZSA9IHByb2ZpbGVKb2Iuam9iO1xyXG59XHJcblxyXG5lZGl0UHJvZmlsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGZpbGxQcm9maWxlRm9ybVByZXZpb3VzSW5wdXQoKTtcclxuICBlZGl0Rm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxuICBlZGl0TW9kYWwub3BlbigpO1xyXG59KTtcclxuXHJcbmFkZGNhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBhZGRDYXJkRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxuICBhZGRDYXJkTW9kYWwub3BlbigpO1xyXG59KTtcclxuIiwiZXhwb3J0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuXHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xyXG4gICAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fcmVuZGVyZXIoZWxlbWVudCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBvcGVuID0gKG5hbWUsIGxpbmspID0+IHtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGxpbms7XHJcblxyXG4gICAgY29uc3QgaW1hZ2VDYXJkTW9kYWwgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZVwiKTtcclxuICAgIGNvbnN0IGltYWdlQ2FyZENhcHRpb25Nb2RhbCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2NhcHRpb25cIik7XHJcblxyXG4gICAgaW1hZ2VDYXJkQ2FwdGlvbk1vZGFsLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIGltYWdlQ2FyZE1vZGFsLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICBpbWFnZUNhcmRNb2RhbC5hbHQgPSBgTGFuZHNjYXBlIGltYWdlIGZyb20gYSBwbGFjZSBuYW1lZCAke3RoaXMuX25hbWV9YDtcclxuICB9O1xyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyBwcm9maWxlTmFtZVNlbGVjdG9yLCBwcm9maWxlSm9iU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVOYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcHJvZmlsZUpvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZmlsZUpvYlNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmFtZTogdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQsXHJcbiAgICAgIGpvYjogdGhpcy5fcHJvZmlsZUpvYi50ZXh0Q29udGVudCxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh7IHByb2ZpbGVOYW1lSW5wdXQsIHByb2ZpbGVKb2JJbnB1dCB9KSB7XHJcbiAgICB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IHByb2ZpbGVOYW1lSW5wdXQ7XHJcbiAgICB0aGlzLl9wcm9maWxlSm9iLnRleHRDb250ZW50ID0gcHJvZmlsZUpvYklucHV0O1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwidGVtcGxhdGVDYXJkU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJuYW1lIiwibGluayIsImV2dCIsInRhcmdldCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsInRoaXMiLCJfbGlzdEl0ZW0iLCJyZW1vdmUiLCJfZ2V0VGVtcGxhdGUiLCJfdGl0bGUiLCJxdWVyeVNlbGVjdG9yIiwiX2ltYWdlIiwidGV4dENvbnRlbnQiLCJfbmFtZSIsInNyYyIsIl9saW5rIiwiYWx0IiwiX2FkZEV2ZW50TGlzdGVuZXJzIiwiX3RlbXBsYXRlQ2FyZFNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsImRvY3VtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsIl9saWtlQnV0dG9uIiwiX2RlbGV0ZUJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlTGlrZUljb24iLCJfaGFuZGxlRGVsZXRlSWNvbiIsInNldHRpbmdzIiwiZm9ybSIsIl9pbnB1dHMiLCJldmVyeSIsImlucHV0IiwidmFsaWRpdHkiLCJ2YWxpZCIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfc2V0dGluZ3MiLCJfaXNGb3JtVmFsaWQiLCJfZW5hYmxlU3VibWl0QnV0dG9uIiwiX2J1dHRvbiIsIl9kaXNhYmxlU3VibWl0QnV0dG9uIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2Zvcm0iLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsIl9jaGVja1ZhbGlkaXR5IiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX3Nob3dFcnJvciIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJlcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJhZGQiLCJfaGlkZUVycm9yIiwiYnV0dG9uIiwiZGlzYWJsZWQiLCJyZXNldFZhbGlkYXRpb24iLCJlbmFibGVWYWxpZGF0aW9uIiwicHJldmVudERlZmF1bHQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJrZXkiLCJjbG9zZSIsImNvbnRhaW5zIiwiX3BvcHVwIiwiYmluZCIsIm9wZW4iLCJfaGFuZGxlRXNjQ2xvc2UiLCJfaGFuZGxlT3ZlcmxheUNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInNldEV2ZW50TGlzdGVuZXJzIiwiUG9wdXBXaXRoRm9ybSIsInBvcHVwIiwic3VibWl0SGFuZGxlciIsInN1cGVyIiwiX3N1Ym1pdEhhbmRsZXIiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dFZhbHVlcyIsInZhbHVlIiwicmVzZXQiLCJlZGl0UHJvZmlsZU1vZGFsIiwiYWRkTmV3Q2FyZE1vZGFsIiwibGlzdCIsImVkaXRQcm9maWxlRm9ybSIsImFkZENhcmRGb3JtIiwicHJvZmlsZU5hbWVJbnB1dCIsInByb2ZpbGVKb2JJbnB1dCIsImVkaXRQcm9maWxlQnV0dG9uIiwiYWRkY2FyZEJ1dHRvbiIsImluaXRpYWxDYXJkcyIsInNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJlbGVtZW50IiwiX2VsZW1lbnQiLCJhZGRJdGVtIiwicHJlcGVuZCIsInJlbmRlckNhcmQiLCJwcmV2aWV3SW1hZ2VNb2RhbCIsImltYWdlQ2FyZE1vZGFsIiwiaGFuZGxlSW1hZ2VQcmV2aWV3IiwiY2FyZCIsImxpc3RJdGVtIiwiZ2VuZXJhdGVDYXJkIiwidXNlckluZm8iLCJwcm9maWxlTmFtZVNlbGVjdG9yIiwicHJvZmlsZUpvYlNlbGVjdG9yIiwiX3Byb2ZpbGVOYW1lIiwiX3Byb2ZpbGVKb2IiLCJnZXRVc2VySW5mbyIsImpvYiIsInNldFVzZXJJbmZvIiwiZWRpdE1vZGFsIiwiYWRkQ2FyZE1vZGFsIiwiZWRpdEZvcm1WYWxpZGF0b3IiLCJGb3JtVmFsaWRhdG9yIiwiYWRkQ2FyZEZvcm1WYWxpZGF0b3IiLCJwcm9maWxlTmFtZSIsInByb2ZpbGVKb2IiLCJmaWxsUHJvZmlsZUZvcm1QcmV2aW91c0lucHV0Il0sInNvdXJjZVJvb3QiOiIifQ==